import __vite__cjsImport0_react from "/@fs/Users/thibault/DeÌveloppements /CJD80/cjd80/node_modules/.vite/deps/react.js?v=8973d617"; const useEffect = __vite__cjsImport0_react["useEffect"];
import { badgeService } from "/src/lib/badge-service.ts";
export function useBadge() {
  useEffect(() => {
    const handleVisibilityChange = () => {
      if (document.visibilityState === "visible") {
        badgeService.clearBadge();
        if ("serviceWorker" in navigator && navigator.serviceWorker.controller) {
          navigator.serviceWorker.controller.postMessage({
            type: "CLEAR_BADGE"
          });
        }
      }
    };
    document.addEventListener("visibilitychange", handleVisibilityChange);
    badgeService.clearBadge();
    if ("serviceWorker" in navigator && navigator.serviceWorker.controller) {
      navigator.serviceWorker.controller.postMessage({
        type: "CLEAR_BADGE"
      });
    }
    return () => {
      document.removeEventListener("visibilitychange", handleVisibilityChange);
    };
  }, []);
  return badgeService;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZS1iYWRnZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBiYWRnZVNlcnZpY2UgfSBmcm9tICdAL2xpYi9iYWRnZS1zZXJ2aWNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUJhZGdlKCkge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEVmZmFjZXIgbGUgYmFkZ2UgcXVhbmQgbCdhcHAgZXN0IG91dmVydGUvYWN0aXZlXG4gICAgY29uc3QgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmIChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJykge1xuICAgICAgICBiYWRnZVNlcnZpY2UuY2xlYXJCYWRnZSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gRW52b3llciB1biBtZXNzYWdlIGF1IFNlcnZpY2UgV29ya2VyIHBvdXIgc3luY2hyb25pc2VyXG4gICAgICAgIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yICYmIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmNvbnRyb2xsZXIpIHtcbiAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIHR5cGU6ICdDTEVBUl9CQURHRSdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSk7XG5cbiAgICAvLyBFZmZhY2VyIGF1IG1vdW50XG4gICAgYmFkZ2VTZXJ2aWNlLmNsZWFyQmFkZ2UoKTtcbiAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyKSB7XG4gICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgdHlwZTogJ0NMRUFSX0JBREdFJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIGJhZGdlU2VydmljZTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBUyxpQkFBaUI7QUFDMUIsU0FBUyxvQkFBb0I7QUFFdEIsZ0JBQVMsV0FBVztBQUN6QixZQUFVLE1BQU07QUFFZCxVQUFNLHlCQUF5QixNQUFNO0FBQ25DLFVBQUksU0FBUyxvQkFBb0IsV0FBVztBQUMxQyxxQkFBYSxXQUFXO0FBR3hCLFlBQUksbUJBQW1CLGFBQWEsVUFBVSxjQUFjLFlBQVk7QUFDdEUsb0JBQVUsY0FBYyxXQUFXLFlBQVk7QUFBQSxZQUM3QyxNQUFNO0FBQUEsVUFDUixDQUFDO0FBQUEsUUFDSDtBQUFBLE1BQ0Y7QUFBQSxJQUNGO0FBRUEsYUFBUyxpQkFBaUIsb0JBQW9CLHNCQUFzQjtBQUdwRSxpQkFBYSxXQUFXO0FBQ3hCLFFBQUksbUJBQW1CLGFBQWEsVUFBVSxjQUFjLFlBQVk7QUFDdEUsZ0JBQVUsY0FBYyxXQUFXLFlBQVk7QUFBQSxRQUM3QyxNQUFNO0FBQUEsTUFDUixDQUFDO0FBQUEsSUFDSDtBQUVBLFdBQU8sTUFBTTtBQUNYLGVBQVMsb0JBQW9CLG9CQUFvQixzQkFBc0I7QUFBQSxJQUN6RTtBQUFBLEVBQ0YsR0FBRyxDQUFDLENBQUM7QUFFTCxTQUFPO0FBQ1Q7IiwibmFtZXMiOltdfQ==