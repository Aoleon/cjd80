import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/edit-idea-modal.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/@fs/Users/thibault/DeÃÅveloppements /CJD80/cjd80/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=8973d617"; const Fragment = __vite__cjsImport0_react_jsxDevRuntime["Fragment"]; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/@fs/Users/thibault/DeÃÅveloppements /CJD80/cjd80/node_modules/.vite/deps/react.js?v=8973d617"; const useState = __vite__cjsImport3_react["useState"]; const useEffect = __vite__cjsImport3_react["useEffect"];
import { useMutation, useQueryClient } from "/@fs/Users/thibault/DeÃÅveloppements /CJD80/cjd80/node_modules/.vite/deps/@tanstack_react-query.js?v=27047fab";
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from "/src/components/ui/dialog.tsx";
import { Button } from "/src/components/ui/button.tsx";
import { Input } from "/src/components/ui/input.tsx";
import { Label } from "/src/components/ui/label.tsx";
import RichTextEditor from "/src/components/ui/rich-text-editor.tsx";
import { Loader2, Edit, Save, X } from "/@fs/Users/thibault/DeÃÅveloppements /CJD80/cjd80/node_modules/.vite/deps/lucide-react.js?v=9fe1beea";
import { useToast } from "/src/hooks/use-toast.ts";
export default function EditIdeaModal({ open, onOpenChange, idea }) {
  _s();
  const [title, setTitle] = useState("");
  const [description, setDescription] = useState("");
  const [proposedBy, setProposedBy] = useState("");
  const [proposedByEmail, setProposedByEmail] = useState("");
  const [createdAt, setCreatedAt] = useState("");
  const queryClient = useQueryClient();
  const { toast } = useToast();
  useEffect(() => {
    if (open && idea) {
      setTitle(idea.title || "");
      setDescription(idea.description || "");
      setProposedBy(idea.proposedBy || "");
      setProposedByEmail(idea.proposedByEmail || "");
      const formattedDate = idea.createdAt ? new Date(idea.createdAt).toISOString().slice(0, 16) : "";
      setCreatedAt(formattedDate);
    } else if (!open) {
      setTitle("");
      setDescription("");
      setProposedBy("");
      setProposedByEmail("");
      setCreatedAt("");
    }
  }, [open, idea]);
  const updateIdeaMutation = useMutation({
    mutationFn: async (data) => {
      if (!idea) throw new Error("Aucune id√©e s√©lectionn√©e");
      const response = await fetch(`/api/admin/ideas/${idea.id}`, {
        method: "PUT",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      });
      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.message || "Erreur lors de la mise √† jour");
      }
      return response.json();
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ["/api/admin/ideas"] });
      queryClient.invalidateQueries({ queryKey: ["/api/ideas"] });
      toast({
        title: "‚úÖ Id√©e modifi√©e",
        description: "L'id√©e a √©t√© mise √† jour avec succ√®s",
        variant: "default"
      });
      onOpenChange(false);
    },
    onError: (error) => {
      toast({
        title: "‚ùå Erreur",
        description: error.message,
        variant: "destructive"
      });
    }
  });
  const handleSubmit = (e) => {
    e.preventDefault();
    if (!title.trim()) {
      toast({
        title: "‚ùå Erreur de validation",
        description: "Le titre est requis",
        variant: "destructive"
      });
      return;
    }
    updateIdeaMutation.mutate({
      title: title.trim(),
      description: description.trim() || null,
      proposedBy: proposedBy.trim(),
      proposedByEmail: proposedByEmail.trim(),
      createdAt: createdAt ? new Date(createdAt).toISOString() : void 0
    });
  };
  const handleCancel = () => {
    setTitle(idea?.title || "");
    setDescription(idea?.description || "");
    setProposedBy(idea?.proposedBy || "");
    setProposedByEmail(idea?.proposedByEmail || "");
    const formattedDate = idea?.createdAt ? new Date(idea.createdAt).toISOString().slice(0, 16) : "";
    setCreatedAt(formattedDate);
    onOpenChange(false);
  };
  return /* @__PURE__ */ jsxDEV(Dialog, { open, onOpenChange, children: /* @__PURE__ */ jsxDEV(DialogContent, { className: "max-w-2xl", children: [
    /* @__PURE__ */ jsxDEV(DialogHeader, { children: [
      /* @__PURE__ */ jsxDEV(DialogTitle, { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsxDEV(Edit, { className: "w-5 h-5 text-cjd-green" }, void 0, false, {
          fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
          lineNumber: 140,
          columnNumber: 13
        }, this),
        "Modifier l'id√©e"
      ] }, void 0, true, {
        fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
        lineNumber: 139,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV(DialogDescription, { children: "Modifier les informations de l'id√©e propos√©e" }, void 0, false, {
        fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
        lineNumber: 143,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
      lineNumber: 138,
      columnNumber: 9
    }, this),
    /* @__PURE__ */ jsxDEV("form", { onSubmit: handleSubmit, className: "space-y-6", children: [
      /* @__PURE__ */ jsxDEV("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsxDEV(Label, { htmlFor: "edit-title", className: "text-sm font-medium text-gray-700", children: "Titre *" }, void 0, false, {
          fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
          lineNumber: 151,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV(
          Input,
          {
            id: "edit-title",
            type: "text",
            value: title,
            onChange: (e) => setTitle(e.target.value),
            placeholder: "Entrez le titre de l'id√©e...",
            className: "w-full",
            required: true,
            maxLength: 255,
            "data-testid": "input-edit-title"
          },
          void 0,
          false,
          {
            fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
            lineNumber: 154,
            columnNumber: 13
          },
          this
        ),
        /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-gray-500", children: [
          title.length,
          "/255 caract√®res"
        ] }, void 0, true, {
          fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
          lineNumber: 165,
          columnNumber: 13
        }, this)
      ] }, void 0, true, {
        fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
        lineNumber: 150,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsxDEV(Label, { htmlFor: "edit-description", className: "text-sm font-medium text-gray-700", children: "Description (vous pouvez ajouter des images)" }, void 0, false, {
          fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
          lineNumber: 172,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV(
          RichTextEditor,
          {
            content: description,
            onChange: setDescription,
            placeholder: "D√©crivez votre id√©e en d√©tail... Vous pouvez ajouter du formatage et des images.",
            maxLength: 1e4,
            testId: "editor-edit-description"
          },
          void 0,
          false,
          {
            fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
            lineNumber: 175,
            columnNumber: 13
          },
          this
        )
      ] }, void 0, true, {
        fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
        lineNumber: 171,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxDEV("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxDEV(Label, { htmlFor: "edit-author-name", className: "text-sm font-medium text-gray-700", children: "Nom de l'auteur *" }, void 0, false, {
            fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
            lineNumber: 187,
            columnNumber: 15
          }, this),
          /* @__PURE__ */ jsxDEV(
            Input,
            {
              id: "edit-author-name",
              type: "text",
              value: proposedBy,
              onChange: (e) => setProposedBy(e.target.value),
              placeholder: "Nom de l'auteur...",
              className: "w-full",
              required: true,
              maxLength: 100,
              "data-testid": "input-edit-author-name"
            },
            void 0,
            false,
            {
              fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
              lineNumber: 190,
              columnNumber: 15
            },
            this
          )
        ] }, void 0, true, {
          fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
          lineNumber: 186,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsxDEV(Label, { htmlFor: "edit-author-email", className: "text-sm font-medium text-gray-700", children: "Email de l'auteur *" }, void 0, false, {
            fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
            lineNumber: 204,
            columnNumber: 15
          }, this),
          /* @__PURE__ */ jsxDEV(
            Input,
            {
              id: "edit-author-email",
              type: "email",
              value: proposedByEmail,
              onChange: (e) => setProposedByEmail(e.target.value),
              placeholder: "email@exemple.com",
              className: "w-full",
              required: true,
              "data-testid": "input-edit-author-email"
            },
            void 0,
            false,
            {
              fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
              lineNumber: 207,
              columnNumber: 15
            },
            this
          )
        ] }, void 0, true, {
          fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
          lineNumber: 203,
          columnNumber: 13
        }, this)
      ] }, void 0, true, {
        fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
        lineNumber: 185,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsxDEV(Label, { htmlFor: "edit-created-at", className: "text-sm font-medium text-gray-700", children: "üìÖ Date de publication" }, void 0, false, {
          fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
          lineNumber: 222,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV(
          Input,
          {
            id: "edit-created-at",
            type: "datetime-local",
            value: createdAt,
            onChange: (e) => setCreatedAt(e.target.value),
            className: "w-full",
            "data-testid": "input-edit-created-at"
          },
          void 0,
          false,
          {
            fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
            lineNumber: 225,
            columnNumber: 13
          },
          this
        ),
        /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-gray-500", children: "Modifiez la date et l'heure de publication de cette id√©e" }, void 0, false, {
          fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
          lineNumber: 233,
          columnNumber: 13
        }, this)
      ] }, void 0, true, {
        fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
        lineNumber: 221,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "flex justify-end space-x-3 pt-4 border-t border-gray-200", children: [
        /* @__PURE__ */ jsxDEV(
          Button,
          {
            type: "button",
            variant: "outline",
            onClick: handleCancel,
            disabled: updateIdeaMutation.isPending,
            className: "px-6",
            "data-testid": "button-cancel-edit",
            children: [
              /* @__PURE__ */ jsxDEV(X, { className: "w-4 h-4 mr-2" }, void 0, false, {
                fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
                lineNumber: 248,
                columnNumber: 15
              }, this),
              "Annuler"
            ]
          },
          void 0,
          true,
          {
            fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
            lineNumber: 240,
            columnNumber: 13
          },
          this
        ),
        /* @__PURE__ */ jsxDEV(
          Button,
          {
            type: "submit",
            disabled: updateIdeaMutation.isPending || !title.trim(),
            className: "bg-cjd-green hover:bg-cjd-green-dark px-6",
            "data-testid": "button-save-edit",
            children: updateIdeaMutation.isPending ? /* @__PURE__ */ jsxDEV(Fragment, { children: [
              /* @__PURE__ */ jsxDEV(Loader2, { className: "w-4 h-4 mr-2 animate-spin" }, void 0, false, {
                fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
                lineNumber: 259,
                columnNumber: 19
              }, this),
              "Modification..."
            ] }, void 0, true, {
              fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
              lineNumber: 258,
              columnNumber: 15
            }, this) : /* @__PURE__ */ jsxDEV(Fragment, { children: [
              /* @__PURE__ */ jsxDEV(Save, { className: "w-4 h-4 mr-2" }, void 0, false, {
                fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
                lineNumber: 264,
                columnNumber: 19
              }, this),
              "Sauvegarder"
            ] }, void 0, true, {
              fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
              lineNumber: 263,
              columnNumber: 15
            }, this)
          },
          void 0,
          false,
          {
            fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
            lineNumber: 251,
            columnNumber: 13
          },
          this
        )
      ] }, void 0, true, {
        fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
        lineNumber: 239,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
      lineNumber: 148,
      columnNumber: 9
    }, this)
  ] }, void 0, true, {
    fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
    lineNumber: 137,
    columnNumber: 7
  }, this) }, void 0, false, {
    fileName: "/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx",
    lineNumber: 136,
    columnNumber: 5
  }, this);
}
_s(EditIdeaModal, "IS0Ea8kS8qD4PVFnwcdqx7h8uH0=", false, function() {
  return [useQueryClient, useToast, useMutation];
});
_c = EditIdeaModal;
var _c;
$RefreshReg$(_c, "EditIdeaModal");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("/Users/thibault/DeÃÅveloppements /CJD80/cjd80/client/src/components/edit-idea-modal.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QyxXQUFRLFdBQVUsK0JBQW5CO0FBQUE7QUFBQTtBQUFBO0FBQUEscUJBQThDO0FBQUE7QUFBQSxpQkFEaEQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxtQkFHQSxJQUVBLG1DQUNFO0FBQUEscUNBQUMsUUFBSyxXQUFVLGtCQUFoQjtBQUFBO0FBQUE7QUFBQTtBQUFBLHFCQUE4QjtBQUFBO0FBQUEsaUJBRGhDO0FBQUE7QUFBQTtBQUFBO0FBQUEsbUJBR0E7QUFBQTtBQUFBLFVBZko7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFFBaUJBO0FBQUEsV0E3QkY7QUFBQTtBQUFBO0FBQUE7QUFBQSxhQThCQTtBQUFBLFNBekhGO0FBQUE7QUFBQTtBQUFBO0FBQUEsV0EwSEE7QUFBQSxPQXJJRjtBQUFBO0FBQUE7QUFBQTtBQUFBLFNBc0lBLEtBdklGO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0F3SUE7QUFFSjtBQUFDaEQsR0E3T3VCSixlQUFhO0FBQUEsVUFNZmYsZ0JBQ0ZjLFVBc0JTZixXQUFXO0FBQUE7QUFBQXFFLEtBN0JoQnJEO0FBQWEsSUFBQXFEO0FBQUFDLGFBQUFELElBQUEiLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZU11dGF0aW9uIiwidXNlUXVlcnlDbGllbnQiLCJEaWFsb2ciLCJEaWFsb2dDb250ZW50IiwiRGlhbG9nSGVhZGVyIiwiRGlhbG9nVGl0bGUiLCJEaWFsb2dEZXNjcmlwdGlvbiIsIkJ1dHRvbiIsIklucHV0IiwiTGFiZWwiLCJSaWNoVGV4dEVkaXRvciIsIkxvYWRlcjIiLCJFZGl0IiwiU2F2ZSIsIlgiLCJ1c2VUb2FzdCIsIkVkaXRJZGVhTW9kYWwiLCJvcGVuIiwib25PcGVuQ2hhbmdlIiwiaWRlYSIsIl9zIiwidGl0bGUiLCJzZXRUaXRsZSIsImRlc2NyaXB0aW9uIiwic2V0RGVzY3JpcHRpb24iLCJwcm9wb3NlZEJ5Iiwic2V0UHJvcG9zZWRCeSIsInByb3Bvc2VkQnlFbWFpbCIsInNldFByb3Bvc2VkQnlFbWFpbCIsImNyZWF0ZWRBdCIsInNldENyZWF0ZWRBdCIsInF1ZXJ5Q2xpZW50IiwidG9hc3QiLCJmb3JtYXR0ZWREYXRlIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic2xpY2UiLCJ1cGRhdGVJZGVhTXV0YXRpb24iLCJtdXRhdGlvbkZuIiwiZGF0YSIsIkVycm9yIiwicmVzcG9uc2UiLCJmZXRjaCIsImlkIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJlcnJvciIsImpzb24iLCJtZXNzYWdlIiwib25TdWNjZXNzIiwiaW52YWxpZGF0ZVF1ZXJpZXMiLCJxdWVyeUtleSIsInZhcmlhbnQiLCJvbkVycm9yIiwiaGFuZGxlU3VibWl0IiwiZSIsInByZXZlbnREZWZhdWx0IiwidHJpbSIsIm11dGF0ZSIsInVuZGVmaW5lZCIsImhhbmRsZUNhbmNlbCIsInRhcmdldCIsInZhbHVlIiwibGVuZ3RoIiwiaXNQZW5kaW5nIiwiX2MiLCIkUmVmcmVzaFJlZyQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiZWRpdC1pZGVhLW1vZGFsLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VNdXRhdGlvbiwgdXNlUXVlcnlDbGllbnQgfSBmcm9tIFwiQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5XCI7XG5pbXBvcnQgeyBEaWFsb2csIERpYWxvZ0NvbnRlbnQsIERpYWxvZ0hlYWRlciwgRGlhbG9nVGl0bGUsIERpYWxvZ0Rlc2NyaXB0aW9uIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9kaWFsb2dcIjtcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYnV0dG9uXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvaW5wdXRcIjtcbmltcG9ydCB7IExhYmVsIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9sYWJlbFwiO1xuaW1wb3J0IFJpY2hUZXh0RWRpdG9yIGZyb20gXCJAL2NvbXBvbmVudHMvdWkvcmljaC10ZXh0LWVkaXRvclwiO1xuaW1wb3J0IHsgTG9hZGVyMiwgRWRpdCwgU2F2ZSwgWCB9IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSBcIkAvaG9va3MvdXNlLXRvYXN0XCI7XG5pbXBvcnQgdHlwZSB7IElkZWEgfSBmcm9tIFwiQHNoYXJlZC9zY2hlbWFcIjtcblxuaW50ZXJmYWNlIEVkaXRJZGVhTW9kYWxQcm9wcyB7XG4gIG9wZW46IGJvb2xlYW47XG4gIG9uT3BlbkNoYW5nZTogKG9wZW46IGJvb2xlYW4pID0+IHZvaWQ7XG4gIGlkZWE6IElkZWEgfCBudWxsO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBFZGl0SWRlYU1vZGFsKHsgb3Blbiwgb25PcGVuQ2hhbmdlLCBpZGVhIH06IEVkaXRJZGVhTW9kYWxQcm9wcykge1xuICBjb25zdCBbdGl0bGUsIHNldFRpdGxlXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbZGVzY3JpcHRpb24sIHNldERlc2NyaXB0aW9uXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbcHJvcG9zZWRCeSwgc2V0UHJvcG9zZWRCeV0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3Byb3Bvc2VkQnlFbWFpbCwgc2V0UHJvcG9zZWRCeUVtYWlsXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbY3JlYXRlZEF0LCBzZXRDcmVhdGVkQXRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gdXNlUXVlcnlDbGllbnQoKTtcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTtcblxuICAvLyBNZXR0cmUgw6Agam91ciBsZXMgw6l0YXRzIHF1YW5kIGwnaWTDqWUgY2hhbmdlIG91IGxlIG1vZGFsIHMnb3V2cmVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAob3BlbiAmJiBpZGVhKSB7XG4gICAgICBzZXRUaXRsZShpZGVhLnRpdGxlIHx8IFwiXCIpO1xuICAgICAgc2V0RGVzY3JpcHRpb24oaWRlYS5kZXNjcmlwdGlvbiB8fCBcIlwiKTtcbiAgICAgIHNldFByb3Bvc2VkQnkoaWRlYS5wcm9wb3NlZEJ5IHx8IFwiXCIpO1xuICAgICAgc2V0UHJvcG9zZWRCeUVtYWlsKGlkZWEucHJvcG9zZWRCeUVtYWlsIHx8IFwiXCIpO1xuICAgICAgLy8gRm9ybWF0IGRhdGUgZm9yIGRhdGV0aW1lLWxvY2FsIGlucHV0IChyZW1vdmUgc2Vjb25kcyBhbmQgdGltZXpvbmUpXG4gICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gaWRlYS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShpZGVhLmNyZWF0ZWRBdCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxNikgOiBcIlwiO1xuICAgICAgc2V0Q3JlYXRlZEF0KGZvcm1hdHRlZERhdGUpO1xuICAgIH0gZWxzZSBpZiAoIW9wZW4pIHtcbiAgICAgIC8vIFLDqWluaXRpYWxpc2VyIGxlcyBjaGFtcHMgcXVhbmQgbGUgbW9kYWwgc2UgZmVybWVcbiAgICAgIHNldFRpdGxlKFwiXCIpO1xuICAgICAgc2V0RGVzY3JpcHRpb24oXCJcIik7XG4gICAgICBzZXRQcm9wb3NlZEJ5KFwiXCIpO1xuICAgICAgc2V0UHJvcG9zZWRCeUVtYWlsKFwiXCIpO1xuICAgICAgc2V0Q3JlYXRlZEF0KFwiXCIpO1xuICAgIH1cbiAgfSwgW29wZW4sIGlkZWFdKTtcblxuICBjb25zdCB1cGRhdGVJZGVhTXV0YXRpb24gPSB1c2VNdXRhdGlvbih7XG4gICAgbXV0YXRpb25GbjogYXN5bmMgKGRhdGE6IHsgdGl0bGU6IHN0cmluZzsgZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGw7IHByb3Bvc2VkQnk6IHN0cmluZzsgcHJvcG9zZWRCeUVtYWlsOiBzdHJpbmc7IGNyZWF0ZWRBdD86IHN0cmluZyB9KSA9PiB7XG4gICAgICBpZiAoIWlkZWEpIHRocm93IG5ldyBFcnJvcihcIkF1Y3VuZSBpZMOpZSBzw6lsZWN0aW9ubsOpZVwiKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9hZG1pbi9pZGVhcy8ke2lkZWEuaWR9YCwge1xuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UgfHwgXCJFcnJldXIgbG9ycyBkZSBsYSBtaXNlIMOgIGpvdXJcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6ICgpID0+IHtcbiAgICAgIHF1ZXJ5Q2xpZW50LmludmFsaWRhdGVRdWVyaWVzKHsgcXVlcnlLZXk6IFtcIi9hcGkvYWRtaW4vaWRlYXNcIl0gfSk7XG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbXCIvYXBpL2lkZWFzXCJdIH0pO1xuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogXCLinIUgSWTDqWUgbW9kaWZpw6llXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkwnaWTDqWUgYSDDqXTDqSBtaXNlIMOgIGpvdXIgYXZlYyBzdWNjw6hzXCIsXG4gICAgICAgIHZhcmlhbnQ6IFwiZGVmYXVsdFwiLFxuICAgICAgfSk7XG4gICAgICBvbk9wZW5DaGFuZ2UoZmFsc2UpO1xuICAgIH0sXG4gICAgb25FcnJvcjogKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogXCLinYwgRXJyZXVyXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICB2YXJpYW50OiBcImRlc3RydWN0aXZlXCIsXG4gICAgICB9KTtcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIFxuICAgIGlmICghdGl0bGUudHJpbSgpKSB7XG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiBcIuKdjCBFcnJldXIgZGUgdmFsaWRhdGlvblwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJMZSB0aXRyZSBlc3QgcmVxdWlzXCIsXG4gICAgICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIixcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHVwZGF0ZUlkZWFNdXRhdGlvbi5tdXRhdGUoe1xuICAgICAgdGl0bGU6IHRpdGxlLnRyaW0oKSxcbiAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCkgfHwgbnVsbCxcbiAgICAgIHByb3Bvc2VkQnk6IHByb3Bvc2VkQnkudHJpbSgpLFxuICAgICAgcHJvcG9zZWRCeUVtYWlsOiBwcm9wb3NlZEJ5RW1haWwudHJpbSgpLFxuICAgICAgY3JlYXRlZEF0OiBjcmVhdGVkQXQgPyBuZXcgRGF0ZShjcmVhdGVkQXQpLnRvSVNPU3RyaW5nKCkgOiB1bmRlZmluZWQsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2FuY2VsID0gKCkgPT4ge1xuICAgIHNldFRpdGxlKGlkZWE/LnRpdGxlIHx8IFwiXCIpO1xuICAgIHNldERlc2NyaXB0aW9uKGlkZWE/LmRlc2NyaXB0aW9uIHx8IFwiXCIpO1xuICAgIHNldFByb3Bvc2VkQnkoaWRlYT8ucHJvcG9zZWRCeSB8fCBcIlwiKTtcbiAgICBzZXRQcm9wb3NlZEJ5RW1haWwoaWRlYT8ucHJvcG9zZWRCeUVtYWlsIHx8IFwiXCIpO1xuICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBpZGVhPy5jcmVhdGVkQXQgPyBuZXcgRGF0ZShpZGVhLmNyZWF0ZWRBdCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxNikgOiBcIlwiO1xuICAgIHNldENyZWF0ZWRBdChmb3JtYXR0ZWREYXRlKTtcbiAgICBvbk9wZW5DaGFuZ2UoZmFsc2UpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPERpYWxvZyBvcGVuPXtvcGVufSBvbk9wZW5DaGFuZ2U9e29uT3BlbkNoYW5nZX0+XG4gICAgICA8RGlhbG9nQ29udGVudCBjbGFzc05hbWU9XCJtYXgtdy0yeGxcIj5cbiAgICAgICAgPERpYWxvZ0hlYWRlcj5cbiAgICAgICAgICA8RGlhbG9nVGl0bGUgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgIDxFZGl0IGNsYXNzTmFtZT1cInctNSBoLTUgdGV4dC1jamQtZ3JlZW5cIiAvPlxuICAgICAgICAgICAgTW9kaWZpZXIgbCdpZMOpZVxuICAgICAgICAgIDwvRGlhbG9nVGl0bGU+XG4gICAgICAgICAgPERpYWxvZ0Rlc2NyaXB0aW9uPlxuICAgICAgICAgICAgTW9kaWZpZXIgbGVzIGluZm9ybWF0aW9ucyBkZSBsJ2lkw6llIHByb3Bvc8OpZVxuICAgICAgICAgIDwvRGlhbG9nRGVzY3JpcHRpb24+XG4gICAgICAgIDwvRGlhbG9nSGVhZGVyPlxuXG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgICAgIHsvKiBUaXRsZSBGaWVsZCAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJlZGl0LXRpdGxlXCIgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICAgIFRpdHJlICpcbiAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgaWQ9XCJlZGl0LXRpdGxlXCJcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICB2YWx1ZT17dGl0bGV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0VGl0bGUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkVudHJleiBsZSB0aXRyZSBkZSBsJ2lkw6llLi4uXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsXCJcbiAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoPXsyNTV9XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiaW5wdXQtZWRpdC10aXRsZVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgIHt0aXRsZS5sZW5ndGh9LzI1NSBjYXJhY3TDqHJlc1xuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIERlc2NyaXB0aW9uIEZpZWxkICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cImVkaXQtZGVzY3JpcHRpb25cIiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgRGVzY3JpcHRpb24gKHZvdXMgcG91dmV6IGFqb3V0ZXIgZGVzIGltYWdlcylcbiAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICA8UmljaFRleHRFZGl0b3JcbiAgICAgICAgICAgICAgY29udGVudD17ZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtzZXREZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJEw6ljcml2ZXogdm90cmUgaWTDqWUgZW4gZMOpdGFpbC4uLiBWb3VzIHBvdXZleiBham91dGVyIGR1IGZvcm1hdGFnZSBldCBkZXMgaW1hZ2VzLlwiXG4gICAgICAgICAgICAgIG1heExlbmd0aD17MTAwMDB9XG4gICAgICAgICAgICAgIHRlc3RJZD1cImVkaXRvci1lZGl0LWRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogQXV0aG9yIEZpZWxkcyAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiZWRpdC1hdXRob3ItbmFtZVwiIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgIE5vbSBkZSBsJ2F1dGV1ciAqXG4gICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgIGlkPVwiZWRpdC1hdXRob3ItbmFtZVwiXG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtwcm9wb3NlZEJ5fVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UHJvcG9zZWRCeShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJOb20gZGUgbCdhdXRldXIuLi5cIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbFwiXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICBtYXhMZW5ndGg9ezEwMH1cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImlucHV0LWVkaXQtYXV0aG9yLW5hbWVcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwiZWRpdC1hdXRob3ItZW1haWxcIiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAgICBFbWFpbCBkZSBsJ2F1dGV1ciAqXG4gICAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgIGlkPVwiZWRpdC1hdXRob3ItZW1haWxcIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJlbWFpbFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e3Byb3Bvc2VkQnlFbWFpbH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFByb3Bvc2VkQnlFbWFpbChlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJlbWFpbEBleGVtcGxlLmNvbVwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsXCJcbiAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiaW5wdXQtZWRpdC1hdXRob3ItZW1haWxcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogUHVibGljYXRpb24gRGF0ZSBGaWVsZCAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJlZGl0LWNyZWF0ZWQtYXRcIiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cbiAgICAgICAgICAgICAg8J+ThSBEYXRlIGRlIHB1YmxpY2F0aW9uXG4gICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgIGlkPVwiZWRpdC1jcmVhdGVkLWF0XCJcbiAgICAgICAgICAgICAgdHlwZT1cImRhdGV0aW1lLWxvY2FsXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2NyZWF0ZWRBdH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRDcmVhdGVkQXQoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGxcIlxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImlucHV0LWVkaXQtY3JlYXRlZC1hdFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgIE1vZGlmaWV6IGxhIGRhdGUgZXQgbCdoZXVyZSBkZSBwdWJsaWNhdGlvbiBkZSBjZXR0ZSBpZMOpZVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIEFjdGlvbiBCdXR0b25zICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWVuZCBzcGFjZS14LTMgcHQtNCBib3JkZXItdCBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlQ2FuY2VsfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17dXBkYXRlSWRlYU11dGF0aW9uLmlzUGVuZGluZ31cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNlwiXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnV0dG9uLWNhbmNlbC1lZGl0XCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFggY2xhc3NOYW1lPVwidy00IGgtNCBtci0yXCIgLz5cbiAgICAgICAgICAgICAgQW5udWxlclxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17dXBkYXRlSWRlYU11dGF0aW9uLmlzUGVuZGluZyB8fCAhdGl0bGUudHJpbSgpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1jamQtZ3JlZW4gaG92ZXI6YmctY2pkLWdyZWVuLWRhcmsgcHgtNlwiXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnV0dG9uLXNhdmUtZWRpdFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt1cGRhdGVJZGVhTXV0YXRpb24uaXNQZW5kaW5nID8gKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTIgYW5pbWF0ZS1zcGluXCIgLz5cbiAgICAgICAgICAgICAgICAgIE1vZGlmaWNhdGlvbi4uLlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICA8U2F2ZSBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTJcIiAvPlxuICAgICAgICAgICAgICAgICAgU2F1dmVnYXJkZXJcbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L0RpYWxvZ0NvbnRlbnQ+XG4gICAgPC9EaWFsb2c+XG4gICk7XG59Il0sImZpbGUiOiIvVXNlcnMvdGhpYmF1bHQvRGXMgXZlbG9wcGVtZW50cyAvQ0pEODAvY2pkODAvY2xpZW50L3NyYy9jb21wb25lbnRzL2VkaXQtaWRlYS1tb2RhbC50c3gifQ==