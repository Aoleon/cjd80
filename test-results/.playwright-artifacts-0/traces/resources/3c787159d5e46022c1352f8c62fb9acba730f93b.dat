import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/vote-modal.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/@fs/Users/thibault/Développements /CJD80/cjd80/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=8973d617"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/@fs/Users/thibault/Développements /CJD80/cjd80/node_modules/.vite/deps/react.js?v=8973d617"; const useState = __vite__cjsImport3_react["useState"]; const useEffect = __vite__cjsImport3_react["useEffect"];
import { useMutation, useQueryClient } from "/@fs/Users/thibault/Développements /CJD80/cjd80/node_modules/.vite/deps/@tanstack_react-query.js?v=27047fab";
import { Vote, Loader2, X } from "/@fs/Users/thibault/Développements /CJD80/cjd80/node_modules/.vite/deps/lucide-react.js?v=9fe1beea";
import { Dialog, DialogContent, DialogHeader, DialogTitle } from "/src/components/ui/dialog.tsx";
import { Button } from "/src/components/ui/button.tsx";
import { Input } from "/src/components/ui/input.tsx";
import { Label } from "/src/components/ui/label.tsx";
import { Checkbox } from "/src/components/ui/checkbox.tsx";
import { useToast } from "/src/hooks/use-toast.ts";
import { apiRequest } from "/src/lib/queryClient.ts";
import { getIdentity, saveIdentity, clearIdentity, createUserIdentity } from "/src/lib/user-identity.ts";
export default function VoteModal({ open, onOpenChange, idea }) {
  _s();
  const { toast } = useToast();
  const queryClient = useQueryClient();
  const [formData, setFormData] = useState({
    voterName: "",
    voterEmail: ""
  });
  const [rememberMe, setRememberMe] = useState(true);
  useEffect(() => {
    if (open) {
      const storedIdentity = getIdentity();
      if (storedIdentity) {
        setFormData({
          voterName: storedIdentity.name,
          voterEmail: storedIdentity.email
        });
      }
    } else {
      if (!rememberMe) {
        setFormData({ voterName: "", voterEmail: "" });
      }
    }
  }, [open, rememberMe]);
  const voteMutation = useMutation({
    mutationFn: async (vote) => {
      const res = await apiRequest("POST", "/api/votes", vote);
      return await res.json();
    },
    onSuccess: () => {
      try {
        if (rememberMe && formData.voterName && formData.voterEmail) {
          const identity = createUserIdentity(formData.voterName, formData.voterEmail);
          saveIdentity(identity);
        } else if (!rememberMe) {
          clearIdentity();
        }
      } catch (error) {
        console.warn("Failed to manage user identity:", error);
      }
      queryClient.invalidateQueries({ queryKey: ["/api/ideas"] });
      onOpenChange(false);
      toast({
        title: "Vote enregistré avec succès !",
        description: "Merci pour votre participation"
      });
    },
    onError: (error) => {
      toast({
        title: "Erreur",
        description: error.message || "Impossible d'enregistrer votre vote",
        variant: "destructive"
      });
    }
  });
  const handleSubmit = (e) => {
    e.preventDefault();
    if (!idea) return;
    voteMutation.mutate({
      ideaId: idea.id,
      voterName: formData.voterName,
      voterEmail: formData.voterEmail
    });
  };
  const handleInputChange = (field, value) => {
    setFormData((prev) => ({ ...prev, [field]: value }));
  };
  const handleClearInfo = () => {
    try {
      clearIdentity();
      setFormData({ voterName: "", voterEmail: "" });
      toast({
        title: "Informations effacées",
        description: "Vos informations ont été supprimées"
      });
    } catch (error) {
      toast({
        title: "Erreur",
        description: "Impossible d'effacer les informations",
        variant: "destructive"
      });
    }
  };
  return /* @__PURE__ */ jsxDEV(Dialog, { open, onOpenChange, children: /* @__PURE__ */ jsxDEV(DialogContent, { className: "w-full max-w-md mx-3 sm:mx-auto", "data-testid": "modal-vote", children: [
    /* @__PURE__ */ jsxDEV(DialogHeader, { children: /* @__PURE__ */ jsxDEV(DialogTitle, { children: "Voter pour cette idée" }, void 0, false, {
      fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
      lineNumber: 136,
      columnNumber: 11
    }, this) }, void 0, false, {
      fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
      lineNumber: 135,
      columnNumber: 9
    }, this),
    idea && /* @__PURE__ */ jsxDEV("div", { className: "mb-4 p-3 bg-gray-50 rounded-md", "data-testid": "text-idea-summary", children: [
      /* @__PURE__ */ jsxDEV("h4", { className: "font-medium text-gray-800", "data-testid": "text-idea-title", children: idea.title }, void 0, false, {
        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
        lineNumber: 141,
        columnNumber: 13
      }, this),
      idea.description && /* @__PURE__ */ jsxDEV("p", { className: "text-sm text-gray-600 mt-1", "data-testid": "text-idea-description", children: idea.description }, void 0, false, {
        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
        lineNumber: 143,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
      lineNumber: 140,
      columnNumber: 9
    }, this),
    /* @__PURE__ */ jsxDEV("form", { onSubmit: handleSubmit, className: "space-y-4", children: [
      /* @__PURE__ */ jsxDEV("div", { children: [
        /* @__PURE__ */ jsxDEV(Label, { htmlFor: "voter-name", className: "text-sm font-medium text-gray-700", children: "Votre nom *" }, void 0, false, {
          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
          lineNumber: 150,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV(
          Input,
          {
            id: "voter-name",
            type: "text",
            value: formData.voterName,
            onChange: (e) => handleInputChange("voterName", e.target.value),
            placeholder: "Prénom Nom",
            required: true,
            className: "focus:ring-cjd-green focus:border-cjd-green",
            "data-testid": "input-voter-name"
          },
          void 0,
          false,
          {
            fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
            lineNumber: 153,
            columnNumber: 13
          },
          this
        )
      ] }, void 0, true, {
        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
        lineNumber: 149,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("div", { children: [
        /* @__PURE__ */ jsxDEV(Label, { htmlFor: "voter-email", className: "text-sm font-medium text-gray-700", children: "Votre email *" }, void 0, false, {
          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
          lineNumber: 166,
          columnNumber: 13
        }, this),
        /* @__PURE__ */ jsxDEV(
          Input,
          {
            id: "voter-email",
            type: "email",
            value: formData.voterEmail,
            onChange: (e) => handleInputChange("voterEmail", e.target.value),
            placeholder: "email@exemple.com",
            required: true,
            className: "focus:ring-cjd-green focus:border-cjd-green",
            "data-testid": "input-voter-email"
          },
          void 0,
          false,
          {
            fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
            lineNumber: 169,
            columnNumber: 13
          },
          this
        )
      ] }, void 0, true, {
        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
        lineNumber: 165,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "flex items-center space-x-2", children: [
        /* @__PURE__ */ jsxDEV(
          Checkbox,
          {
            id: "remember-me",
            checked: rememberMe,
            onCheckedChange: (checked) => setRememberMe(checked === true),
            "data-testid": "checkbox-remember-me"
          },
          void 0,
          false,
          {
            fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
            lineNumber: 183,
            columnNumber: 13
          },
          this
        ),
        /* @__PURE__ */ jsxDEV(
          Label,
          {
            htmlFor: "remember-me",
            className: "text-sm text-gray-700 cursor-pointer",
            "data-testid": "label-remember-me",
            children: "Se souvenir de moi"
          },
          void 0,
          false,
          {
            fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
            lineNumber: 189,
            columnNumber: 13
          },
          this
        )
      ] }, void 0, true, {
        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
        lineNumber: 182,
        columnNumber: 11
      }, this),
      (formData.voterName || formData.voterEmail) && /* @__PURE__ */ jsxDEV("div", { className: "flex justify-center", children: /* @__PURE__ */ jsxDEV(
        "button",
        {
          type: "button",
          onClick: handleClearInfo,
          className: "text-xs text-gray-500 hover:text-gray-700 underline flex items-center gap-1",
          "data-testid": "button-clear-info",
          children: [
            /* @__PURE__ */ jsxDEV(X, { className: "w-3 h-3" }, void 0, false, {
              fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
              lineNumber: 207,
              columnNumber: 17
            }, this),
            "Effacer mes informations"
          ]
        },
        void 0,
        true,
        {
          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
          lineNumber: 201,
          columnNumber: 15
        },
        this
      ) }, void 0, false, {
        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
        lineNumber: 200,
        columnNumber: 11
      }, this),
      /* @__PURE__ */ jsxDEV("div", { className: "flex justify-end space-x-3 pt-4", children: [
        /* @__PURE__ */ jsxDEV(
          Button,
          {
            type: "button",
            variant: "outline",
            onClick: () => onOpenChange(false),
            disabled: voteMutation.isPending,
            "data-testid": "button-cancel-vote",
            children: "Annuler"
          },
          void 0,
          false,
          {
            fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
            lineNumber: 214,
            columnNumber: 13
          },
          this
        ),
        /* @__PURE__ */ jsxDEV(
          Button,
          {
            type: "submit",
            disabled: voteMutation.isPending,
            className: "bg-cjd-green hover:bg-cjd-green-dark",
            "data-testid": "button-submit-vote",
            children: [
              voteMutation.isPending ? /* @__PURE__ */ jsxDEV(Loader2, { className: "w-4 h-4 mr-2 animate-spin" }, void 0, false, {
                fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
                lineNumber: 230,
                columnNumber: 15
              }, this) : /* @__PURE__ */ jsxDEV(Vote, { className: "w-4 h-4 mr-2" }, void 0, false, {
                fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
                lineNumber: 232,
                columnNumber: 15
              }, this),
              "Confirmer le vote"
            ]
          },
          void 0,
          true,
          {
            fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
            lineNumber: 223,
            columnNumber: 13
          },
          this
        )
      ] }, void 0, true, {
        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
        lineNumber: 213,
        columnNumber: 11
      }, this)
    ] }, void 0, true, {
      fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
      lineNumber: 148,
      columnNumber: 9
    }, this)
  ] }, void 0, true, {
    fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
    lineNumber: 134,
    columnNumber: 7
  }, this) }, void 0, false, {
    fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx",
    lineNumber: 133,
    columnNumber: 5
  }, this);
}
_s(VoteModal, "IyuilKRDwNT3/1E1wArSDyB4F6M=", false, function() {
  return [useToast, useQueryClient, useMutation];
});
_c = VoteModal;
var _c;
$RefreshReg$(_c, "VoteModal");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("/Users/thibault/Développements /CJD80/cjd80/client/src/components/vote-modal.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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QjtBQUFBLGNBQy9CO0FBQUE7QUFBQTtBQUFBLFVBVkg7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLFFBWUE7QUFBQSxXQXRCRjtBQUFBO0FBQUE7QUFBQTtBQUFBLGFBdUJBO0FBQUEsU0F4RkY7QUFBQTtBQUFBO0FBQUE7QUFBQSxXQXlGQTtBQUFBLE9BdkdGO0FBQUE7QUFBQTtBQUFBO0FBQUEsU0F3R0EsS0F6R0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxTQTBHQTtBQUVKO0FBQUMxQyxHQTFNdUJKLFdBQVM7QUFBQSxVQUNiTixVQUNFWixnQkF5QkNELFdBQVc7QUFBQTtBQUFBa0UsS0EzQlYvQztBQUFTLElBQUErQztBQUFBQyxhQUFBRCxJQUFBIiwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VNdXRhdGlvbiIsInVzZVF1ZXJ5Q2xpZW50IiwiVm90ZSIsIkxvYWRlcjIiLCJYIiwiRGlhbG9nIiwiRGlhbG9nQ29udGVudCIsIkRpYWxvZ0hlYWRlciIsIkRpYWxvZ1RpdGxlIiwiQnV0dG9uIiwiSW5wdXQiLCJMYWJlbCIsIkNoZWNrYm94IiwidXNlVG9hc3QiLCJhcGlSZXF1ZXN0IiwiZ2V0SWRlbnRpdHkiLCJzYXZlSWRlbnRpdHkiLCJjbGVhcklkZW50aXR5IiwiY3JlYXRlVXNlcklkZW50aXR5IiwiVm90ZU1vZGFsIiwib3BlbiIsIm9uT3BlbkNoYW5nZSIsImlkZWEiLCJfcyIsInRvYXN0IiwicXVlcnlDbGllbnQiLCJmb3JtRGF0YSIsInNldEZvcm1EYXRhIiwidm90ZXJOYW1lIiwidm90ZXJFbWFpbCIsInJlbWVtYmVyTWUiLCJzZXRSZW1lbWJlck1lIiwic3RvcmVkSWRlbnRpdHkiLCJuYW1lIiwiZW1haWwiLCJ2b3RlTXV0YXRpb24iLCJtdXRhdGlvbkZuIiwidm90ZSIsInJlcyIsImpzb24iLCJvblN1Y2Nlc3MiLCJpZGVudGl0eSIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJpbnZhbGlkYXRlUXVlcmllcyIsInF1ZXJ5S2V5IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsIm9uRXJyb3IiLCJtZXNzYWdlIiwidmFyaWFudCIsImhhbmRsZVN1Ym1pdCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIm11dGF0ZSIsImlkZWFJZCIsImlkIiwiaGFuZGxlSW5wdXRDaGFuZ2UiLCJmaWVsZCIsInZhbHVlIiwicHJldiIsImhhbmRsZUNsZWFySW5mbyIsInRhcmdldCIsImNoZWNrZWQiLCJpc1BlbmRpbmciLCJfYyIsIiRSZWZyZXNoUmVnJCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJ2b3RlLW1vZGFsLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VNdXRhdGlvbiwgdXNlUXVlcnlDbGllbnQgfSBmcm9tIFwiQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5XCI7XG5pbXBvcnQgeyBWb3RlLCBMb2FkZXIyLCBYIH0gZnJvbSBcImx1Y2lkZS1yZWFjdFwiO1xuaW1wb3J0IHsgRGlhbG9nLCBEaWFsb2dDb250ZW50LCBEaWFsb2dIZWFkZXIsIERpYWxvZ1RpdGxlIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9kaWFsb2dcIjtcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYnV0dG9uXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvaW5wdXRcIjtcbmltcG9ydCB7IExhYmVsIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9sYWJlbFwiO1xuaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2NoZWNrYm94XCI7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gXCJAL2hvb2tzL3VzZS10b2FzdFwiO1xuaW1wb3J0IHsgYXBpUmVxdWVzdCB9IGZyb20gXCJAL2xpYi9xdWVyeUNsaWVudFwiO1xuaW1wb3J0IHsgZ2V0SWRlbnRpdHksIHNhdmVJZGVudGl0eSwgY2xlYXJJZGVudGl0eSwgY3JlYXRlVXNlcklkZW50aXR5IH0gZnJvbSBcIkAvbGliL3VzZXItaWRlbnRpdHlcIjtcbmltcG9ydCB0eXBlIHsgSWRlYSwgSW5zZXJ0Vm90ZSB9IGZyb20gXCJAc2hhcmVkL3NjaGVtYVwiO1xuXG5pbnRlcmZhY2UgVm90ZU1vZGFsUHJvcHMge1xuICBvcGVuOiBib29sZWFuO1xuICBvbk9wZW5DaGFuZ2U6IChvcGVuOiBib29sZWFuKSA9PiB2b2lkO1xuICBpZGVhOiAoSWRlYSAmIHsgdm90ZUNvdW50OiBudW1iZXIgfSkgfCBudWxsO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBWb3RlTW9kYWwoeyBvcGVuLCBvbk9wZW5DaGFuZ2UsIGlkZWEgfTogVm90ZU1vZGFsUHJvcHMpIHtcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3QgcXVlcnlDbGllbnQgPSB1c2VRdWVyeUNsaWVudCgpO1xuICBjb25zdCBbZm9ybURhdGEsIHNldEZvcm1EYXRhXSA9IHVzZVN0YXRlKHtcbiAgICB2b3Rlck5hbWU6IFwiXCIsXG4gICAgdm90ZXJFbWFpbDogXCJcIixcbiAgfSk7XG4gIGNvbnN0IFtyZW1lbWJlck1lLCBzZXRSZW1lbWJlck1lXSA9IHVzZVN0YXRlKHRydWUpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG9wZW4pIHtcbiAgICAgIC8vIFByZWZpbGwgZm9ybSB3aXRoIHN0b3JlZCBpZGVudGl0eSBpZiBhdmFpbGFibGVcbiAgICAgIGNvbnN0IHN0b3JlZElkZW50aXR5ID0gZ2V0SWRlbnRpdHkoKTtcbiAgICAgIGlmIChzdG9yZWRJZGVudGl0eSkge1xuICAgICAgICBzZXRGb3JtRGF0YSh7XG4gICAgICAgICAgdm90ZXJOYW1lOiBzdG9yZWRJZGVudGl0eS5uYW1lLFxuICAgICAgICAgIHZvdGVyRW1haWw6IHN0b3JlZElkZW50aXR5LmVtYWlsLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT25seSBjbGVhciBpZiBubyBzdG9yZWQgaWRlbnRpdHkgb3IgdXNlciBjaG9zZSBub3QgdG8gcmVtZW1iZXJcbiAgICAgIGlmICghcmVtZW1iZXJNZSkge1xuICAgICAgICBzZXRGb3JtRGF0YSh7IHZvdGVyTmFtZTogXCJcIiwgdm90ZXJFbWFpbDogXCJcIiB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtvcGVuLCByZW1lbWJlck1lXSk7XG5cbiAgY29uc3Qgdm90ZU11dGF0aW9uID0gdXNlTXV0YXRpb24oe1xuICAgIG11dGF0aW9uRm46IGFzeW5jICh2b3RlOiBJbnNlcnRWb3RlKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGlSZXF1ZXN0KFwiUE9TVFwiLCBcIi9hcGkvdm90ZXNcIiwgdm90ZSk7XG4gICAgICByZXR1cm4gYXdhaXQgcmVzLmpzb24oKTtcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKCkgPT4ge1xuICAgICAgLy8gSGFuZGxlIGlkZW50aXR5IHN0b3JhZ2UgYmFzZWQgb24gcmVtZW1iZXJNZSBwcmVmZXJlbmNlXG4gICAgICB0cnkge1xuICAgICAgICBpZiAocmVtZW1iZXJNZSAmJiBmb3JtRGF0YS52b3Rlck5hbWUgJiYgZm9ybURhdGEudm90ZXJFbWFpbCkge1xuICAgICAgICAgIGNvbnN0IGlkZW50aXR5ID0gY3JlYXRlVXNlcklkZW50aXR5KGZvcm1EYXRhLnZvdGVyTmFtZSwgZm9ybURhdGEudm90ZXJFbWFpbCk7XG4gICAgICAgICAgc2F2ZUlkZW50aXR5KGlkZW50aXR5KTtcbiAgICAgICAgfSBlbHNlIGlmICghcmVtZW1iZXJNZSkge1xuICAgICAgICAgIGNsZWFySWRlbnRpdHkoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gbWFuYWdlIHVzZXIgaWRlbnRpdHk6JywgZXJyb3IpO1xuICAgICAgfVxuXG4gICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbXCIvYXBpL2lkZWFzXCJdIH0pO1xuICAgICAgb25PcGVuQ2hhbmdlKGZhbHNlKTtcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6IFwiVm90ZSBlbnJlZ2lzdHLDqSBhdmVjIHN1Y2PDqHMgIVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJNZXJjaSBwb3VyIHZvdHJlIHBhcnRpY2lwYXRpb25cIixcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgb25FcnJvcjogKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgdG9hc3Qoe1xuICAgICAgICB0aXRsZTogXCJFcnJldXJcIixcbiAgICAgICAgZGVzY3JpcHRpb246IGVycm9yLm1lc3NhZ2UgfHwgXCJJbXBvc3NpYmxlIGQnZW5yZWdpc3RyZXIgdm90cmUgdm90ZVwiLFxuICAgICAgICB2YXJpYW50OiBcImRlc3RydWN0aXZlXCIsXG4gICAgICB9KTtcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICghaWRlYSkgcmV0dXJuO1xuXG4gICAgdm90ZU11dGF0aW9uLm11dGF0ZSh7XG4gICAgICBpZGVhSWQ6IGlkZWEuaWQsXG4gICAgICB2b3Rlck5hbWU6IGZvcm1EYXRhLnZvdGVyTmFtZSxcbiAgICAgIHZvdGVyRW1haWw6IGZvcm1EYXRhLnZvdGVyRW1haWwsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSAoZmllbGQ6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4ge1xuICAgIHNldEZvcm1EYXRhKHByZXYgPT4gKHsgLi4ucHJldiwgW2ZpZWxkXTogdmFsdWUgfSkpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUNsZWFySW5mbyA9ICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY2xlYXJJZGVudGl0eSgpO1xuICAgICAgc2V0Rm9ybURhdGEoeyB2b3Rlck5hbWU6IFwiXCIsIHZvdGVyRW1haWw6IFwiXCIgfSk7XG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiBcIkluZm9ybWF0aW9ucyBlZmZhY8OpZXNcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiVm9zIGluZm9ybWF0aW9ucyBvbnQgw6l0w6kgc3VwcHJpbcOpZXNcIixcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiBcIkVycmV1clwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJJbXBvc3NpYmxlIGQnZWZmYWNlciBsZXMgaW5mb3JtYXRpb25zXCIsXG4gICAgICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIixcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxEaWFsb2cgb3Blbj17b3Blbn0gb25PcGVuQ2hhbmdlPXtvbk9wZW5DaGFuZ2V9PlxuICAgICAgPERpYWxvZ0NvbnRlbnQgY2xhc3NOYW1lPVwidy1mdWxsIG1heC13LW1kIG14LTMgc206bXgtYXV0b1wiIGRhdGEtdGVzdGlkPVwibW9kYWwtdm90ZVwiPlxuICAgICAgICA8RGlhbG9nSGVhZGVyPlxuICAgICAgICAgIDxEaWFsb2dUaXRsZT5Wb3RlciBwb3VyIGNldHRlIGlkw6llPC9EaWFsb2dUaXRsZT5cbiAgICAgICAgPC9EaWFsb2dIZWFkZXI+XG4gICAgICAgIFxuICAgICAgICB7aWRlYSAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00IHAtMyBiZy1ncmF5LTUwIHJvdW5kZWQtbWRcIiBkYXRhLXRlc3RpZD1cInRleHQtaWRlYS1zdW1tYXJ5XCI+XG4gICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW0gdGV4dC1ncmF5LTgwMFwiIGRhdGEtdGVzdGlkPVwidGV4dC1pZGVhLXRpdGxlXCI+e2lkZWEudGl0bGV9PC9oND5cbiAgICAgICAgICAgIHtpZGVhLmRlc2NyaXB0aW9uICYmIChcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwIG10LTFcIiBkYXRhLXRlc3RpZD1cInRleHQtaWRlYS1kZXNjcmlwdGlvblwiPntpZGVhLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0gY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwidm90ZXItbmFtZVwiIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICBWb3RyZSBub20gKlxuICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICBpZD1cInZvdGVyLW5hbWVcIlxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS52b3Rlck5hbWV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlSW5wdXRDaGFuZ2UoXCJ2b3Rlck5hbWVcIiwgZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlByw6lub20gTm9tXCJcbiAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZm9jdXM6cmluZy1jamQtZ3JlZW4gZm9jdXM6Ym9yZGVyLWNqZC1ncmVlblwiXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiaW5wdXQtdm90ZXItbmFtZVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj1cInZvdGVyLWVtYWlsXCIgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICAgIFZvdHJlIGVtYWlsICpcbiAgICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgaWQ9XCJ2b3Rlci1lbWFpbFwiXG4gICAgICAgICAgICAgIHR5cGU9XCJlbWFpbFwiXG4gICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS52b3RlckVtYWlsfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZUlucHV0Q2hhbmdlKFwidm90ZXJFbWFpbFwiLCBlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiZW1haWxAZXhlbXBsZS5jb21cIlxuICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmb2N1czpyaW5nLWNqZC1ncmVlbiBmb2N1czpib3JkZXItY2pkLWdyZWVuXCJcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJpbnB1dC12b3Rlci1lbWFpbFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIHsvKiBSZW1lbWJlciBtZSBjaGVja2JveCAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgIGlkPVwicmVtZW1iZXItbWVcIlxuICAgICAgICAgICAgICBjaGVja2VkPXtyZW1lbWJlck1lfVxuICAgICAgICAgICAgICBvbkNoZWNrZWRDaGFuZ2U9eyhjaGVja2VkKSA9PiBzZXRSZW1lbWJlck1lKGNoZWNrZWQgPT09IHRydWUpfVxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD1cImNoZWNrYm94LXJlbWVtYmVyLW1lXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8TGFiZWxcbiAgICAgICAgICAgICAgaHRtbEZvcj1cInJlbWVtYmVyLW1lXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNzAwIGN1cnNvci1wb2ludGVyXCJcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJsYWJlbC1yZW1lbWJlci1tZVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFNlIHNvdXZlbmlyIGRlIG1vaVxuICAgICAgICAgICAgPC9MYWJlbD5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBDbGVhciBpbmZvIGJ1dHRvbiAqL31cbiAgICAgICAgICB7KGZvcm1EYXRhLnZvdGVyTmFtZSB8fCBmb3JtRGF0YS52b3RlckVtYWlsKSAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsZWFySW5mb31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgaG92ZXI6dGV4dC1ncmF5LTcwMCB1bmRlcmxpbmUgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTFcIlxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnV0dG9uLWNsZWFyLWluZm9cIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFggY2xhc3NOYW1lPVwidy0zIGgtM1wiIC8+XG4gICAgICAgICAgICAgICAgRWZmYWNlciBtZXMgaW5mb3JtYXRpb25zXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1lbmQgc3BhY2UteC0zIHB0LTRcIj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25PcGVuQ2hhbmdlKGZhbHNlKX1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3ZvdGVNdXRhdGlvbi5pc1BlbmRpbmd9XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwiYnV0dG9uLWNhbmNlbC12b3RlXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgQW5udWxlclxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17dm90ZU11dGF0aW9uLmlzUGVuZGluZ31cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctY2pkLWdyZWVuIGhvdmVyOmJnLWNqZC1ncmVlbi1kYXJrXCJcbiAgICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJidXR0b24tc3VibWl0LXZvdGVcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7dm90ZU11dGF0aW9uLmlzUGVuZGluZyA/IChcbiAgICAgICAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTIgYW5pbWF0ZS1zcGluXCIgLz5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8Vm90ZSBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTJcIiAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICBDb25maXJtZXIgbGUgdm90ZVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvRGlhbG9nQ29udGVudD5cbiAgICA8L0RpYWxvZz5cbiAgKTtcbn1cbiJdLCJmaWxlIjoiL1VzZXJzL3RoaWJhdWx0L0RlzIF2ZWxvcHBlbWVudHMgL0NKRDgwL2NqZDgwL2NsaWVudC9zcmMvY29tcG9uZW50cy92b3RlLW1vZGFsLnRzeCJ9