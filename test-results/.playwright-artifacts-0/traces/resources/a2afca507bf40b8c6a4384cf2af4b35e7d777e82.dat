const CURRENT_VERSION = 1;
const LOCALSTORAGE_NAME_KEY = "cjdUserName";
const LOCALSTORAGE_EMAIL_KEY = "cjdUserEmail";
export function getIdentity() {
  try {
    const name = localStorage.getItem(LOCALSTORAGE_NAME_KEY);
    const email = localStorage.getItem(LOCALSTORAGE_EMAIL_KEY);
    if (name && email) {
      const identity = {
        name,
        email,
        version: CURRENT_VERSION
      };
      if (isValidIdentity(identity)) {
        return identity;
      } else {
        console.warn("Invalid user identity found in localStorage, clearing it");
        clearIdentity();
      }
    }
  } catch (error) {
    console.warn("Failed to read user identity:", error);
  }
  return null;
}
export function saveIdentity(identity) {
  try {
    if (!isValidIdentity(identity)) {
      throw new Error("Invalid user identity provided");
    }
    localStorage.setItem(LOCALSTORAGE_NAME_KEY, identity.name.trim());
    localStorage.setItem(LOCALSTORAGE_EMAIL_KEY, identity.email.trim().toLowerCase());
  } catch (error) {
    console.error("Failed to save user identity:", error);
    throw new Error("Could not save user identity");
  }
}
export function clearIdentity() {
  try {
    localStorage.removeItem(LOCALSTORAGE_NAME_KEY);
    localStorage.removeItem(LOCALSTORAGE_EMAIL_KEY);
  } catch (error) {
    console.error("Failed to clear user identity:", error);
    throw new Error("Could not clear user identity");
  }
}
export function createUserIdentity(name, email) {
  return {
    name: name.trim(),
    email: email.trim().toLowerCase(),
    version: CURRENT_VERSION
  };
}
export function isValidIdentity(identity) {
  return !!(identity && identity.name && identity.name.trim().length > 0 && identity.email && identity.email.trim().length > 0 && identity.email.includes("@"));
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItaWRlbnRpdHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVc2VyIElkZW50aXR5IE1hbmFnZW1lbnQgVXRpbGl0eVxuICogTWFuYWdlcyB1c2VyIG5hbWUgYW5kIGVtYWlsIHN0b3JhZ2UgaW4gbG9jYWxTdG9yYWdlIG9ubHkgKGZvciBwcml2YWN5IGFuZCBzZWN1cml0eSlcbiAqIFByZXZpb3VzIHZlcnNpb24gc3RvcmVkIGRhdGEgaW4gY29va2llcyB3aGljaCBleHBvc2VkIHBlcnNvbmFsIGluZm9ybWF0aW9uIHVubmVjZXNzYXJpbHlcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJJZGVudGl0eSB7XG4gIG5hbWU6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgdmVyc2lvbjogbnVtYmVyO1xufVxuXG5jb25zdCBDVVJSRU5UX1ZFUlNJT04gPSAxO1xuY29uc3QgTE9DQUxTVE9SQUdFX05BTUVfS0VZID0gJ2NqZFVzZXJOYW1lJztcbmNvbnN0IExPQ0FMU1RPUkFHRV9FTUFJTF9LRVkgPSAnY2pkVXNlckVtYWlsJztcblxuLyoqXG4gKiBSZWFkcyB1c2VyIGlkZW50aXR5IGZyb20gbG9jYWxTdG9yYWdlIG9ubHkgKHNlY3VyZSBhcHByb2FjaClcbiAqIEByZXR1cm5zIFVzZXJJZGVudGl0eSBvYmplY3Qgb3IgbnVsbCBpZiBub3QgZm91bmQgb3IgaW52YWxpZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SWRlbnRpdHkoKTogVXNlcklkZW50aXR5IHwgbnVsbCB7XG4gIHRyeSB7XG4gICAgY29uc3QgbmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMU1RPUkFHRV9OQU1FX0tFWSk7XG4gICAgY29uc3QgZW1haWwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTFNUT1JBR0VfRU1BSUxfS0VZKTtcbiAgICBcbiAgICBpZiAobmFtZSAmJiBlbWFpbCkge1xuICAgICAgY29uc3QgaWRlbnRpdHk6IFVzZXJJZGVudGl0eSA9IHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZW1haWwsXG4gICAgICAgIHZlcnNpb246IENVUlJFTlRfVkVSU0lPTlxuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gVmFsaWRhdGUgdGhlIGlkZW50aXR5IGJlZm9yZSByZXR1cm5pbmcgaXRcbiAgICAgIGlmIChpc1ZhbGlkSWRlbnRpdHkoaWRlbnRpdHkpKSB7XG4gICAgICAgIHJldHVybiBpZGVudGl0eTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCB1c2VyIGlkZW50aXR5IGZvdW5kIGluIGxvY2FsU3RvcmFnZSwgY2xlYXJpbmcgaXQnKTtcbiAgICAgICAgY2xlYXJJZGVudGl0eSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byByZWFkIHVzZXIgaWRlbnRpdHk6JywgZXJyb3IpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogU2F2ZXMgdXNlciBpZGVudGl0eSB0byBsb2NhbFN0b3JhZ2Ugb25seSAoc2VjdXJlIGFwcHJvYWNoKVxuICogQHBhcmFtIGlkZW50aXR5IFVzZXJJZGVudGl0eSBvYmplY3QgdG8gc2F2ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2F2ZUlkZW50aXR5KGlkZW50aXR5OiBVc2VySWRlbnRpdHkpOiB2b2lkIHtcbiAgdHJ5IHtcbiAgICAvLyBWYWxpZGF0ZSBpZGVudGl0eSBiZWZvcmUgc2F2aW5nXG4gICAgaWYgKCFpc1ZhbGlkSWRlbnRpdHkoaWRlbnRpdHkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdXNlciBpZGVudGl0eSBwcm92aWRlZCcpO1xuICAgIH1cblxuICAgIC8vIFNhdmUgdG8gbG9jYWxTdG9yYWdlIG9ubHlcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShMT0NBTFNUT1JBR0VfTkFNRV9LRVksIGlkZW50aXR5Lm5hbWUudHJpbSgpKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShMT0NBTFNUT1JBR0VfRU1BSUxfS0VZLCBpZGVudGl0eS5lbWFpbC50cmltKCkudG9Mb3dlckNhc2UoKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNhdmUgdXNlciBpZGVudGl0eTonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3Qgc2F2ZSB1c2VyIGlkZW50aXR5Jyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhcnMgdXNlciBpZGVudGl0eSBmcm9tIGxvY2FsU3RvcmFnZSBvbmx5IChzZWN1cmUgYXBwcm9hY2gpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcklkZW50aXR5KCk6IHZvaWQge1xuICB0cnkge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExPQ0FMU1RPUkFHRV9OQU1FX0tFWSk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTE9DQUxTVE9SQUdFX0VNQUlMX0tFWSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNsZWFyIHVzZXIgaWRlbnRpdHk6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGNsZWFyIHVzZXIgaWRlbnRpdHknKTtcbiAgfVxufVxuXG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiB0byBjcmVhdGUgYSBVc2VySWRlbnRpdHkgb2JqZWN0XG4gKiBAcGFyYW0gbmFtZSBVc2VyJ3MgbmFtZVxuICogQHBhcmFtIGVtYWlsIFVzZXIncyBlbWFpbFxuICogQHJldHVybnMgVXNlcklkZW50aXR5IG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVXNlcklkZW50aXR5KG5hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZyk6IFVzZXJJZGVudGl0eSB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogbmFtZS50cmltKCksXG4gICAgZW1haWw6IGVtYWlsLnRyaW0oKS50b0xvd2VyQ2FzZSgpLFxuICAgIHZlcnNpb246IENVUlJFTlRfVkVSU0lPTlxuICB9O1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyBpZiBhIFVzZXJJZGVudGl0eSBvYmplY3QgaGFzIHZhbGlkIGRhdGFcbiAqIEBwYXJhbSBpZGVudGl0eSBVc2VySWRlbnRpdHkgb2JqZWN0IHRvIHZhbGlkYXRlXG4gKiBAcmV0dXJucyB0cnVlIGlmIHZhbGlkLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRJZGVudGl0eShpZGVudGl0eTogVXNlcklkZW50aXR5IHwgbnVsbCk6IGlkZW50aXR5IGlzIFVzZXJJZGVudGl0eSB7XG4gIHJldHVybiAhIShcbiAgICBpZGVudGl0eSAmJiBcbiAgICBpZGVudGl0eS5uYW1lICYmIFxuICAgIGlkZW50aXR5Lm5hbWUudHJpbSgpLmxlbmd0aCA+IDAgJiZcbiAgICBpZGVudGl0eS5lbWFpbCAmJiBcbiAgICBpZGVudGl0eS5lbWFpbC50cmltKCkubGVuZ3RoID4gMCAmJlxuICAgIGlkZW50aXR5LmVtYWlsLmluY2x1ZGVzKCdAJylcbiAgKTtcbn0iXSwibWFwcGluZ3MiOiJBQVlBLE1BQU0sa0JBQWtCO0FBQ3hCLE1BQU0sd0JBQXdCO0FBQzlCLE1BQU0seUJBQXlCO0FBTXhCLGdCQUFTLGNBQW1DO0FBQ2pELE1BQUk7QUFDRixVQUFNLE9BQU8sYUFBYSxRQUFRLHFCQUFxQjtBQUN2RCxVQUFNLFFBQVEsYUFBYSxRQUFRLHNCQUFzQjtBQUV6RCxRQUFJLFFBQVEsT0FBTztBQUNqQixZQUFNLFdBQXlCO0FBQUEsUUFDN0I7QUFBQSxRQUNBO0FBQUEsUUFDQSxTQUFTO0FBQUEsTUFDWDtBQUdBLFVBQUksZ0JBQWdCLFFBQVEsR0FBRztBQUM3QixlQUFPO0FBQUEsTUFDVCxPQUFPO0FBQ0wsZ0JBQVEsS0FBSywwREFBMEQ7QUFDdkUsc0JBQWM7QUFBQSxNQUNoQjtBQUFBLElBQ0Y7QUFBQSxFQUNGLFNBQVMsT0FBTztBQUNkLFlBQVEsS0FBSyxpQ0FBaUMsS0FBSztBQUFBLEVBQ3JEO0FBRUEsU0FBTztBQUNUO0FBTU8sZ0JBQVMsYUFBYSxVQUE4QjtBQUN6RCxNQUFJO0FBRUYsUUFBSSxDQUFDLGdCQUFnQixRQUFRLEdBQUc7QUFDOUIsWUFBTSxJQUFJLE1BQU0sZ0NBQWdDO0FBQUEsSUFDbEQ7QUFHQSxpQkFBYSxRQUFRLHVCQUF1QixTQUFTLEtBQUssS0FBSyxDQUFDO0FBQ2hFLGlCQUFhLFFBQVEsd0JBQXdCLFNBQVMsTUFBTSxLQUFLLEVBQUUsWUFBWSxDQUFDO0FBQUEsRUFDbEYsU0FBUyxPQUFPO0FBQ2QsWUFBUSxNQUFNLGlDQUFpQyxLQUFLO0FBQ3BELFVBQU0sSUFBSSxNQUFNLDhCQUE4QjtBQUFBLEVBQ2hEO0FBQ0Y7QUFLTyxnQkFBUyxnQkFBc0I7QUFDcEMsTUFBSTtBQUNGLGlCQUFhLFdBQVcscUJBQXFCO0FBQzdDLGlCQUFhLFdBQVcsc0JBQXNCO0FBQUEsRUFDaEQsU0FBUyxPQUFPO0FBQ2QsWUFBUSxNQUFNLGtDQUFrQyxLQUFLO0FBQ3JELFVBQU0sSUFBSSxNQUFNLCtCQUErQjtBQUFBLEVBQ2pEO0FBQ0Y7QUFTTyxnQkFBUyxtQkFBbUIsTUFBYyxPQUE2QjtBQUM1RSxTQUFPO0FBQUEsSUFDTCxNQUFNLEtBQUssS0FBSztBQUFBLElBQ2hCLE9BQU8sTUFBTSxLQUFLLEVBQUUsWUFBWTtBQUFBLElBQ2hDLFNBQVM7QUFBQSxFQUNYO0FBQ0Y7QUFPTyxnQkFBUyxnQkFBZ0IsVUFBeUQ7QUFDdkYsU0FBTyxDQUFDLEVBQ04sWUFDQSxTQUFTLFFBQ1QsU0FBUyxLQUFLLEtBQUssRUFBRSxTQUFTLEtBQzlCLFNBQVMsU0FDVCxTQUFTLE1BQU0sS0FBSyxFQUFFLFNBQVMsS0FDL0IsU0FBUyxNQUFNLFNBQVMsR0FBRztBQUUvQjsiLCJuYW1lcyI6W119