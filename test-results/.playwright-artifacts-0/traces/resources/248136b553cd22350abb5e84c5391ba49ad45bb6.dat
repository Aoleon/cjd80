class BadgeService {
  constructor() {
    this.currentCount = 0;
  }
  // Vérifier si l'API est disponible
  isSupported() {
    return "setAppBadge" in navigator;
  }
  // Définir le badge avec un nombre
  async setBadge(count) {
    if (!this.isSupported()) {
      return false;
    }
    try {
      if (count > 0) {
        await navigator.setAppBadge(count);
        this.currentCount = count;
        return true;
      } else {
        return await this.clearBadge();
      }
    } catch (error) {
      console.error("[Badge] Erreur setBadge:", error);
      return false;
    }
  }
  // Supprimer le badge
  async clearBadge() {
    if (!this.isSupported()) {
      return false;
    }
    try {
      await navigator.clearAppBadge();
      this.currentCount = 0;
      return true;
    } catch (error) {
      console.error("[Badge] Erreur clearBadge:", error);
      return false;
    }
  }
  // Incrémenter le compteur
  async incrementBadge(amount = 1) {
    const newCount = this.currentCount + amount;
    return this.setBadge(newCount);
  }
  // Décrémenter le compteur
  async decrementBadge(amount = 1) {
    const newCount = Math.max(0, this.currentCount - amount);
    return this.setBadge(newCount);
  }
  // Obtenir le compteur actuel
  getCurrentCount() {
    return this.currentCount;
  }
}
export const badgeService = new BadgeService();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhZGdlLXNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQmFkZ2VTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBjdXJyZW50Q291bnQ6IG51bWJlciA9IDA7XG5cbiAgLy8gVsOpcmlmaWVyIHNpIGwnQVBJIGVzdCBkaXNwb25pYmxlXG4gIGlzU3VwcG9ydGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAnc2V0QXBwQmFkZ2UnIGluIG5hdmlnYXRvcjtcbiAgfVxuXG4gIC8vIETDqWZpbmlyIGxlIGJhZGdlIGF2ZWMgdW4gbm9tYnJlXG4gIGFzeW5jIHNldEJhZGdlKGNvdW50OiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAoIXRoaXMuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBpZiAoY291bnQgPiAwKSB7XG4gICAgICAgIGF3YWl0IG5hdmlnYXRvci5zZXRBcHBCYWRnZShjb3VudCk7XG4gICAgICAgIHRoaXMuY3VycmVudENvdW50ID0gY291bnQ7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2xlYXJCYWRnZSgpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQmFkZ2VdIEVycmV1ciBzZXRCYWRnZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gU3VwcHJpbWVyIGxlIGJhZGdlXG4gIGFzeW5jIGNsZWFyQmFkZ2UoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCF0aGlzLmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsZWFyQXBwQmFkZ2UoKTtcbiAgICAgIHRoaXMuY3VycmVudENvdW50ID0gMDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQmFkZ2VdIEVycmV1ciBjbGVhckJhZGdlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLyBJbmNyw6ltZW50ZXIgbGUgY29tcHRldXJcbiAgYXN5bmMgaW5jcmVtZW50QmFkZ2UoYW1vdW50OiBudW1iZXIgPSAxKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgbmV3Q291bnQgPSB0aGlzLmN1cnJlbnRDb3VudCArIGFtb3VudDtcbiAgICByZXR1cm4gdGhpcy5zZXRCYWRnZShuZXdDb3VudCk7XG4gIH1cblxuICAvLyBEw6ljcsOpbWVudGVyIGxlIGNvbXB0ZXVyXG4gIGFzeW5jIGRlY3JlbWVudEJhZGdlKGFtb3VudDogbnVtYmVyID0gMSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IG5ld0NvdW50ID0gTWF0aC5tYXgoMCwgdGhpcy5jdXJyZW50Q291bnQgLSBhbW91bnQpO1xuICAgIHJldHVybiB0aGlzLnNldEJhZGdlKG5ld0NvdW50KTtcbiAgfVxuXG4gIC8vIE9idGVuaXIgbGUgY29tcHRldXIgYWN0dWVsXG4gIGdldEN1cnJlbnRDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRDb3VudDtcbiAgfVxufVxuXG4vLyBJbnN0YW5jZSBzaW5nbGV0b25cbmV4cG9ydCBjb25zdCBiYWRnZVNlcnZpY2UgPSBuZXcgQmFkZ2VTZXJ2aWNlKCk7XG4iXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sYUFBYTtBQUFBLEVBQW5CO0FBQ0UsU0FBUSxlQUF1QjtBQUFBO0FBQUE7QUFBQSxFQUcvQixjQUF1QjtBQUNyQixXQUFPLGlCQUFpQjtBQUFBLEVBQzFCO0FBQUE7QUFBQSxFQUdBLE1BQU0sU0FBUyxPQUFpQztBQUM5QyxRQUFJLENBQUMsS0FBSyxZQUFZLEdBQUc7QUFDdkIsYUFBTztBQUFBLElBQ1Q7QUFFQSxRQUFJO0FBQ0YsVUFBSSxRQUFRLEdBQUc7QUFDYixjQUFNLFVBQVUsWUFBWSxLQUFLO0FBQ2pDLGFBQUssZUFBZTtBQUNwQixlQUFPO0FBQUEsTUFDVCxPQUFPO0FBQ0wsZUFBTyxNQUFNLEtBQUssV0FBVztBQUFBLE1BQy9CO0FBQUEsSUFDRixTQUFTLE9BQU87QUFDZCxjQUFRLE1BQU0sNEJBQTRCLEtBQUs7QUFDL0MsYUFBTztBQUFBLElBQ1Q7QUFBQSxFQUNGO0FBQUE7QUFBQSxFQUdBLE1BQU0sYUFBK0I7QUFDbkMsUUFBSSxDQUFDLEtBQUssWUFBWSxHQUFHO0FBQ3ZCLGFBQU87QUFBQSxJQUNUO0FBRUEsUUFBSTtBQUNGLFlBQU0sVUFBVSxjQUFjO0FBQzlCLFdBQUssZUFBZTtBQUNwQixhQUFPO0FBQUEsSUFDVCxTQUFTLE9BQU87QUFDZCxjQUFRLE1BQU0sOEJBQThCLEtBQUs7QUFDakQsYUFBTztBQUFBLElBQ1Q7QUFBQSxFQUNGO0FBQUE7QUFBQSxFQUdBLE1BQU0sZUFBZSxTQUFpQixHQUFxQjtBQUN6RCxVQUFNLFdBQVcsS0FBSyxlQUFlO0FBQ3JDLFdBQU8sS0FBSyxTQUFTLFFBQVE7QUFBQSxFQUMvQjtBQUFBO0FBQUEsRUFHQSxNQUFNLGVBQWUsU0FBaUIsR0FBcUI7QUFDekQsVUFBTSxXQUFXLEtBQUssSUFBSSxHQUFHLEtBQUssZUFBZSxNQUFNO0FBQ3ZELFdBQU8sS0FBSyxTQUFTLFFBQVE7QUFBQSxFQUMvQjtBQUFBO0FBQUEsRUFHQSxrQkFBMEI7QUFDeEIsV0FBTyxLQUFLO0FBQUEsRUFDZDtBQUNGO0FBR08sYUFBTSxlQUFlLElBQUksYUFBYTsiLCJuYW1lcyI6W119