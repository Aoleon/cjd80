import { createHotContext as __vite__createHotContext } from "/@vite/client";import.meta.hot = __vite__createHotContext("/src/components/member-chatbot.tsx");import __vite__cjsImport0_react_jsxDevRuntime from "/@fs/Users/thibault/Développements /CJD80/cjd80/node_modules/.vite/deps/react_jsx-dev-runtime.js?v=8973d617"; const jsxDEV = __vite__cjsImport0_react_jsxDevRuntime["jsxDEV"];
import * as RefreshRuntime from "/@react-refresh";
const inWebWorker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let prevRefreshReg;
let prevRefreshSig;
if (import.meta.hot && !inWebWorker) {
  if (!window.$RefreshReg$) {
    throw new Error(
      "@vitejs/plugin-react can't detect preamble. Something is wrong."
    );
  }
  prevRefreshReg = window.$RefreshReg$;
  prevRefreshSig = window.$RefreshSig$;
  window.$RefreshReg$ = RefreshRuntime.getRefreshReg("/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx");
  window.$RefreshSig$ = RefreshRuntime.createSignatureFunctionForTransform;
}
var _s = $RefreshSig$();
import __vite__cjsImport3_react from "/@fs/Users/thibault/Développements /CJD80/cjd80/node_modules/.vite/deps/react.js?v=8973d617"; const useState = __vite__cjsImport3_react["useState"]; const useRef = __vite__cjsImport3_react["useRef"]; const useEffect = __vite__cjsImport3_react["useEffect"];
import { useMutation } from "/@fs/Users/thibault/Développements /CJD80/cjd80/node_modules/.vite/deps/@tanstack_react-query.js?v=27047fab";
import { apiRequest } from "/src/lib/queryClient.ts";
import { useToast } from "/src/hooks/use-toast.ts";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle
} from "/src/components/ui/card.tsx";
import { Button } from "/src/components/ui/button.tsx";
import { Input } from "/src/components/ui/input.tsx";
import { ScrollArea } from "/src/components/ui/scroll-area.tsx";
import { Skeleton } from "/src/components/ui/skeleton.tsx";
import { Loader2, Send, Bot, User, Code } from "/@fs/Users/thibault/Développements /CJD80/cjd80/node_modules/.vite/deps/lucide-react.js?v=9fe1beea";
export function MemberChatbot({ memberEmail }) {
  _s();
  const { toast } = useToast();
  const [messages, setMessages] = useState([]);
  const [input, setInput] = useState("");
  const scrollAreaRef = useRef(null);
  const queryMutation = useMutation({
    mutationFn: async (question) => {
      const res = await apiRequest("POST", "/api/admin/chatbot/query", {
        question,
        context: memberEmail ? `Membre: ${memberEmail}` : void 0
      });
      return res.json();
    },
    onSuccess: (data) => {
      if (data.success) {
        setMessages(
          (prev) => [
            ...prev,
            {
              role: "assistant",
              content: data.answer,
              sql: data.sql,
              data: data.data,
              timestamp: /* @__PURE__ */ new Date()
            }
          ]
        );
      } else {
        toast({
          title: "Erreur",
          description: data.error || "Une erreur est survenue",
          variant: "destructive"
        });
      }
    },
    onError: (error) => {
      toast({
        title: "Erreur",
        description: error.message || "Impossible de traiter la question",
        variant: "destructive"
      });
    }
  });
  useEffect(() => {
    if (scrollAreaRef.current) {
      const scrollContainer = scrollAreaRef.current.querySelector("[data-radix-scroll-area-viewport]");
      if (scrollContainer) {
        scrollContainer.scrollTop = scrollContainer.scrollHeight;
      }
    }
  }, [messages]);
  const handleSubmit = (e) => {
    e.preventDefault();
    if (!input.trim() || queryMutation.isPending) return;
    const userMessage = {
      role: "user",
      content: input,
      timestamp: /* @__PURE__ */ new Date()
    };
    setMessages((prev) => [...prev, userMessage]);
    setInput("");
    queryMutation.mutate(input);
  };
  const formatData = (data) => {
    if (!data || data.length === 0) return null;
    const headers = Object.keys(data[0]);
    return /* @__PURE__ */ jsxDEV("div", { className: "mt-2 overflow-x-auto", children: [
      /* @__PURE__ */ jsxDEV("table", { className: "min-w-full text-sm border-collapse", children: [
        /* @__PURE__ */ jsxDEV("thead", { children: /* @__PURE__ */ jsxDEV("tr", { className: "border-b", children: headers.map(
          (header) => /* @__PURE__ */ jsxDEV("th", { className: "text-left p-2 font-medium", children: header }, header, false, {
            fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
            lineNumber: 129,
            columnNumber: 15
          }, this)
        ) }, void 0, false, {
          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
          lineNumber: 127,
          columnNumber: 13
        }, this) }, void 0, false, {
          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
          lineNumber: 126,
          columnNumber: 11
        }, this),
        /* @__PURE__ */ jsxDEV("tbody", { children: data.slice(0, 10).map(
          (row, idx) => /* @__PURE__ */ jsxDEV("tr", { className: "border-b", children: headers.map(
            (header) => /* @__PURE__ */ jsxDEV("td", { className: "p-2", children: typeof row[header] === "object" ? JSON.stringify(row[header]) : String(row[header] ?? "") }, header, false, {
              fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
              lineNumber: 139,
              columnNumber: 15
            }, this)
          ) }, idx, false, {
            fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
            lineNumber: 137,
            columnNumber: 13
          }, this)
        ) }, void 0, false, {
          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
          lineNumber: 135,
          columnNumber: 11
        }, this)
      ] }, void 0, true, {
        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
        lineNumber: 125,
        columnNumber: 9
      }, this),
      data.length > 10 && /* @__PURE__ */ jsxDEV("p", { className: "text-xs text-muted-foreground mt-2", children: [
        "Affichage de 10 résultats sur ",
        data.length
      ] }, void 0, true, {
        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
        lineNumber: 150,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
      lineNumber: 124,
      columnNumber: 7
    }, this);
  };
  return /* @__PURE__ */ jsxDEV("div", { className: "space-y-4", children: [
    /* @__PURE__ */ jsxDEV("div", { children: [
      /* @__PURE__ */ jsxDEV("h3", { className: "text-lg font-semibold", children: "Chatbot Base de Données" }, void 0, false, {
        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
        lineNumber: 161,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV("p", { className: "text-sm text-muted-foreground", children: "Posez des questions en langage naturel pour interroger la base de données" }, void 0, false, {
        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
        lineNumber: 162,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
      lineNumber: 160,
      columnNumber: 7
    }, this),
    /* @__PURE__ */ jsxDEV(Card, { className: "h-[600px] flex flex-col", children: [
      /* @__PURE__ */ jsxDEV(CardHeader, { className: "pb-3", children: [
        /* @__PURE__ */ jsxDEV(CardTitle, { className: "text-base", children: "Assistant SQL" }, void 0, false, {
          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
          lineNumber: 169,
          columnNumber: 11
        }, this),
        /* @__PURE__ */ jsxDEV(CardDescription, { children: 'Exemples: "Combien de membres actifs avons-nous?", "Quels sont les membres avec le score le plus élevé?"' }, void 0, false, {
          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
          lineNumber: 170,
          columnNumber: 11
        }, this)
      ] }, void 0, true, {
        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
        lineNumber: 168,
        columnNumber: 9
      }, this),
      /* @__PURE__ */ jsxDEV(CardContent, { className: "flex-1 flex flex-col p-0", children: [
        /* @__PURE__ */ jsxDEV(ScrollArea, { className: "flex-1 px-4", ref: scrollAreaRef, children: /* @__PURE__ */ jsxDEV("div", { className: "space-y-4 py-4", children: [
          messages.length === 0 && /* @__PURE__ */ jsxDEV("div", { className: "text-center text-muted-foreground py-8", children: [
            /* @__PURE__ */ jsxDEV(Bot, { className: "h-12 w-12 mx-auto mb-4 opacity-50" }, void 0, false, {
              fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
              lineNumber: 179,
              columnNumber: 19
            }, this),
            /* @__PURE__ */ jsxDEV("p", { children: "Commencez à poser une question sur la base de données" }, void 0, false, {
              fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
              lineNumber: 180,
              columnNumber: 19
            }, this)
          ] }, void 0, true, {
            fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
            lineNumber: 178,
            columnNumber: 15
          }, this),
          messages.map(
            (message, idx) => /* @__PURE__ */ jsxDEV(
              "div",
              {
                className: `flex gap-3 ${message.role === "user" ? "justify-end" : "justify-start"}`,
                children: [
                  message.role === "assistant" && /* @__PURE__ */ jsxDEV("div", { className: "flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center", children: /* @__PURE__ */ jsxDEV(Bot, { className: "h-4 w-4 text-primary" }, void 0, false, {
                    fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                    lineNumber: 192,
                    columnNumber: 23
                  }, this) }, void 0, false, {
                    fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                    lineNumber: 191,
                    columnNumber: 17
                  }, this),
                  /* @__PURE__ */ jsxDEV(
                    "div",
                    {
                      className: `max-w-[80%] rounded-lg p-3 ${message.role === "user" ? "bg-primary text-primary-foreground" : "bg-muted"}`,
                      children: /* @__PURE__ */ jsxDEV("div", { className: "flex items-start gap-2", children: [
                        message.role === "user" && /* @__PURE__ */ jsxDEV(User, { className: "h-4 w-4 mt-0.5 flex-shrink-0" }, void 0, false, {
                          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                          lineNumber: 204,
                          columnNumber: 21
                        }, this),
                        /* @__PURE__ */ jsxDEV("div", { className: "flex-1", children: [
                          /* @__PURE__ */ jsxDEV("p", { className: "text-sm whitespace-pre-wrap", children: message.content }, void 0, false, {
                            fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                            lineNumber: 207,
                            columnNumber: 25
                          }, this),
                          message.sql && /* @__PURE__ */ jsxDEV("details", { className: "mt-2", children: [
                            /* @__PURE__ */ jsxDEV("summary", { className: "text-xs cursor-pointer flex items-center gap-1", children: [
                              /* @__PURE__ */ jsxDEV(Code, { className: "h-3 w-3" }, void 0, false, {
                                fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                                lineNumber: 211,
                                columnNumber: 31
                              }, this),
                              "Voir la requête SQL"
                            ] }, void 0, true, {
                              fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                              lineNumber: 210,
                              columnNumber: 29
                            }, this),
                            /* @__PURE__ */ jsxDEV("pre", { className: "mt-2 text-xs bg-background p-2 rounded overflow-x-auto", children: /* @__PURE__ */ jsxDEV("code", { children: message.sql }, void 0, false, {
                              fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                              lineNumber: 215,
                              columnNumber: 31
                            }, this) }, void 0, false, {
                              fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                              lineNumber: 214,
                              columnNumber: 29
                            }, this)
                          ] }, void 0, true, {
                            fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                            lineNumber: 209,
                            columnNumber: 23
                          }, this),
                          message.data && formatData(message.data)
                        ] }, void 0, true, {
                          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                          lineNumber: 206,
                          columnNumber: 23
                        }, this)
                      ] }, void 0, true, {
                        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                        lineNumber: 202,
                        columnNumber: 21
                      }, this)
                    },
                    void 0,
                    false,
                    {
                      fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                      lineNumber: 195,
                      columnNumber: 19
                    },
                    this
                  ),
                  message.role === "user" && /* @__PURE__ */ jsxDEV("div", { className: "flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center", children: /* @__PURE__ */ jsxDEV(User, { className: "h-4 w-4 text-primary-foreground" }, void 0, false, {
                    fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                    lineNumber: 225,
                    columnNumber: 23
                  }, this) }, void 0, false, {
                    fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                    lineNumber: 224,
                    columnNumber: 17
                  }, this)
                ]
              },
              idx,
              true,
              {
                fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                lineNumber: 184,
                columnNumber: 15
              },
              this
            )
          ),
          queryMutation.isPending && /* @__PURE__ */ jsxDEV("div", { className: "flex gap-3 justify-start", children: [
            /* @__PURE__ */ jsxDEV("div", { className: "flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center", children: /* @__PURE__ */ jsxDEV(Bot, { className: "h-4 w-4 text-primary" }, void 0, false, {
              fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
              lineNumber: 233,
              columnNumber: 21
            }, this) }, void 0, false, {
              fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
              lineNumber: 232,
              columnNumber: 19
            }, this),
            /* @__PURE__ */ jsxDEV("div", { className: "bg-muted rounded-lg p-3", children: /* @__PURE__ */ jsxDEV(Skeleton, { className: "h-4 w-32" }, void 0, false, {
              fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
              lineNumber: 236,
              columnNumber: 21
            }, this) }, void 0, false, {
              fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
              lineNumber: 235,
              columnNumber: 19
            }, this)
          ] }, void 0, true, {
            fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
            lineNumber: 231,
            columnNumber: 15
          }, this)
        ] }, void 0, true, {
          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
          lineNumber: 176,
          columnNumber: 13
        }, this) }, void 0, false, {
          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
          lineNumber: 175,
          columnNumber: 11
        }, this),
        /* @__PURE__ */ jsxDEV("form", { onSubmit: handleSubmit, className: "p-4 border-t", children: /* @__PURE__ */ jsxDEV("div", { className: "flex gap-2", children: [
          /* @__PURE__ */ jsxDEV(
            Input,
            {
              value: input,
              onChange: (e) => setInput(e.target.value),
              placeholder: "Posez votre question...",
              disabled: queryMutation.isPending,
              className: "flex-1"
            },
            void 0,
            false,
            {
              fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
              lineNumber: 244,
              columnNumber: 15
            },
            this
          ),
          /* @__PURE__ */ jsxDEV(
            Button,
            {
              type: "submit",
              disabled: !input.trim() || queryMutation.isPending,
              children: queryMutation.isPending ? /* @__PURE__ */ jsxDEV(Loader2, { className: "h-4 w-4 animate-spin" }, void 0, false, {
                fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                lineNumber: 256,
                columnNumber: 17
              }, this) : /* @__PURE__ */ jsxDEV(Send, { className: "h-4 w-4" }, void 0, false, {
                fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
                lineNumber: 258,
                columnNumber: 17
              }, this)
            },
            void 0,
            false,
            {
              fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
              lineNumber: 251,
              columnNumber: 15
            },
            this
          )
        ] }, void 0, true, {
          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
          lineNumber: 243,
          columnNumber: 13
        }, this) }, void 0, false, {
          fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
          lineNumber: 242,
          columnNumber: 11
        }, this)
      ] }, void 0, true, {
        fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
        lineNumber: 174,
        columnNumber: 9
      }, this)
    ] }, void 0, true, {
      fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
      lineNumber: 167,
      columnNumber: 7
    }, this)
  ] }, void 0, true, {
    fileName: "/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx",
    lineNumber: 159,
    columnNumber: 5
  }, this);
}
_s(MemberChatbot, "EX40ximKMIny4LGEdWWH7yB7hI8=", false, function() {
  return [useToast, useMutation];
});
_c = MemberChatbot;
var _c;
$RefreshReg$(_c, "MemberChatbot");
if (import.meta.hot && !inWebWorker) {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
if (import.meta.hot && !inWebWorker) {
  RefreshRuntime.__hmr_import(import.meta.url).then((currentExports) => {
    RefreshRuntime.registerExportsForReactRefresh("/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx", currentExports);
    import.meta.hot.accept((nextExports) => {
      if (!nextExports) return;
      const invalidateMessage = RefreshRuntime.validateRefreshBoundaryAndEnqueueUpdate("/Users/thibault/Développements /CJD80/cjd80/client/src/components/member-chatbot.tsx", currentExports, nextExports);
      if (invalidateMessage) import.meta.hot.invalidate(invalidateMessage);
    });
  });
}

//# sourceMappingURL=data:application/json;base64,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Y2dDO0FBQUFBLGNBRXhDaEMsd0JBQWNnQyxZQUNiLHVCQUFDLFdBQVEsV0FBVSwwQkFBbkI7QUFBQTtBQUFBO0FBQUE7QUFBQSxxQkFBeUMsSUFFekMsdUJBQUMsUUFBSyxXQUFVLGFBQWhCO0FBQUE7QUFBQTtBQUFBO0FBQUEscUJBQXlCO0FBQUE7QUFBQSxZQVA3QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsVUFTQTtBQUFBLGFBakJGO0FBQUE7QUFBQTtBQUFBO0FBQUEsZUFrQkEsS0FuQkY7QUFBQTtBQUFBO0FBQUE7QUFBQSxlQW9CQTtBQUFBLFdBeEZGO0FBQUE7QUFBQTtBQUFBO0FBQUEsYUF5RkE7QUFBQSxTQWhHRjtBQUFBO0FBQUE7QUFBQTtBQUFBLFdBaUdBO0FBQUEsT0F6R0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxTQTBHQTtBQUVKO0FBQUN2QyxHQXpOZUYsZUFBYTtBQUFBLFVBQ1RmLFVBS0lGLFdBQVc7QUFBQTtBQUFBNEUsS0FObkIzRDtBQUFhLElBQUEyRDtBQUFBQyxhQUFBRCxJQUFBIiwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJ1c2VNdXRhdGlvbiIsImFwaVJlcXVlc3QiLCJ1c2VUb2FzdCIsIkNhcmQiLCJDYXJkQ29udGVudCIsIkNhcmREZXNjcmlwdGlvbiIsIkNhcmRIZWFkZXIiLCJDYXJkVGl0bGUiLCJCdXR0b24iLCJJbnB1dCIsIlNjcm9sbEFyZWEiLCJTa2VsZXRvbiIsIkxvYWRlcjIiLCJTZW5kIiwiQm90IiwiVXNlciIsIkNvZGUiLCJNZW1iZXJDaGF0Ym90IiwibWVtYmVyRW1haWwiLCJfcyIsInRvYXN0IiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsImlucHV0Iiwic2V0SW5wdXQiLCJzY3JvbGxBcmVhUmVmIiwicXVlcnlNdXRhdGlvbiIsIm11dGF0aW9uRm4iLCJxdWVzdGlvbiIsInJlcyIsImNvbnRleHQiLCJ1bmRlZmluZWQiLCJqc29uIiwib25TdWNjZXNzIiwiZGF0YSIsInN1Y2Nlc3MiLCJwcmV2Iiwicm9sZSIsImNvbnRlbnQiLCJhbnN3ZXIiLCJzcWwiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImVycm9yIiwidmFyaWFudCIsIm9uRXJyb3IiLCJtZXNzYWdlIiwiY3VycmVudCIsInNjcm9sbENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJzY3JvbGxUb3AiLCJzY3JvbGxIZWlnaHQiLCJoYW5kbGVTdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJ0cmltIiwiaXNQZW5kaW5nIiwidXNlck1lc3NhZ2UiLCJtdXRhdGUiLCJmb3JtYXREYXRhIiwibGVuZ3RoIiwiaGVhZGVycyIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJoZWFkZXIiLCJzbGljZSIsInJvdyIsImlkeCIsIkpTT04iLCJzdHJpbmdpZnkiLCJTdHJpbmciLCJ0YXJnZXQiLCJ2YWx1ZSIsIl9jIiwiJFJlZnJlc2hSZWckIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbIm1lbWJlci1jaGF0Ym90LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZU11dGF0aW9uIH0gZnJvbSBcIkB0YW5zdGFjay9yZWFjdC1xdWVyeVwiO1xuaW1wb3J0IHsgYXBpUmVxdWVzdCB9IGZyb20gXCJAL2xpYi9xdWVyeUNsaWVudFwiO1xuaW1wb3J0IHsgdXNlVG9hc3QgfSBmcm9tIFwiQC9ob29rcy91c2UtdG9hc3RcIjtcbmltcG9ydCB7XG4gIENhcmQsXG4gIENhcmRDb250ZW50LFxuICBDYXJkRGVzY3JpcHRpb24sXG4gIENhcmRIZWFkZXIsXG4gIENhcmRUaXRsZSxcbn0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9jYXJkXCI7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2J1dHRvblwiO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2lucHV0XCI7XG5pbXBvcnQgeyBTY3JvbGxBcmVhIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9zY3JvbGwtYXJlYVwiO1xuaW1wb3J0IHsgU2tlbGV0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL3NrZWxldG9uXCI7XG5pbXBvcnQgeyBCYWRnZSB9IGZyb20gXCJAL2NvbXBvbmVudHMvdWkvYmFkZ2VcIjtcbmltcG9ydCB7IExvYWRlcjIsIFNlbmQsIEJvdCwgVXNlciwgQ29kZSB9IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcblxuaW50ZXJmYWNlIE1lc3NhZ2Uge1xuICByb2xlOiBcInVzZXJcIiB8IFwiYXNzaXN0YW50XCI7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgc3FsPzogc3RyaW5nO1xuICBkYXRhPzogYW55W107XG4gIHRpbWVzdGFtcDogRGF0ZTtcbn1cblxuaW50ZXJmYWNlIE1lbWJlckNoYXRib3RQcm9wcyB7XG4gIG1lbWJlckVtYWlsPzogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gTWVtYmVyQ2hhdGJvdCh7IG1lbWJlckVtYWlsIH06IE1lbWJlckNoYXRib3RQcm9wcykge1xuICBjb25zdCB7IHRvYXN0IH0gPSB1c2VUb2FzdCgpO1xuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlPE1lc3NhZ2VbXT4oW10pO1xuICBjb25zdCBbaW5wdXQsIHNldElucHV0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBzY3JvbGxBcmVhUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcblxuICBjb25zdCBxdWVyeU11dGF0aW9uID0gdXNlTXV0YXRpb24oe1xuICAgIG11dGF0aW9uRm46IGFzeW5jIChxdWVzdGlvbjogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGlSZXF1ZXN0KFwiUE9TVFwiLCBcIi9hcGkvYWRtaW4vY2hhdGJvdC9xdWVyeVwiLCB7XG4gICAgICAgIHF1ZXN0aW9uLFxuICAgICAgICBjb250ZXh0OiBtZW1iZXJFbWFpbCA/IGBNZW1icmU6ICR7bWVtYmVyRW1haWx9YCA6IHVuZGVmaW5lZCxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IChkYXRhKSA9PiB7XG4gICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiBbXG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiBcImFzc2lzdGFudFwiLFxuICAgICAgICAgICAgY29udGVudDogZGF0YS5hbnN3ZXIsXG4gICAgICAgICAgICBzcWw6IGRhdGEuc3FsLFxuICAgICAgICAgICAgZGF0YTogZGF0YS5kYXRhLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9hc3Qoe1xuICAgICAgICAgIHRpdGxlOiBcIkVycmV1clwiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmVycm9yIHx8IFwiVW5lIGVycmV1ciBlc3Qgc3VydmVudWVcIixcbiAgICAgICAgICB2YXJpYW50OiBcImRlc3RydWN0aXZlXCIsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgb25FcnJvcjogKGVycm9yOiBhbnkpID0+IHtcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdGl0bGU6IFwiRXJyZXVyXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlIHx8IFwiSW1wb3NzaWJsZSBkZSB0cmFpdGVyIGxhIHF1ZXN0aW9uXCIsXG4gICAgICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIixcbiAgICAgIH0pO1xuICAgIH0sXG4gIH0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gU2Nyb2xsIHRvIGJvdHRvbSB3aGVuIG5ldyBtZXNzYWdlcyBhcnJpdmVcbiAgICBpZiAoc2Nyb2xsQXJlYVJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zdCBzY3JvbGxDb250YWluZXIgPSBzY3JvbGxBcmVhUmVmLmN1cnJlbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcmFkaXgtc2Nyb2xsLWFyZWEtdmlld3BvcnRdJyk7XG4gICAgICBpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XG4gICAgICAgIHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xuICAgICAgfVxuICAgIH1cbiAgfSwgW21lc3NhZ2VzXSk7XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoIWlucHV0LnRyaW0oKSB8fCBxdWVyeU11dGF0aW9uLmlzUGVuZGluZykgcmV0dXJuO1xuXG4gICAgY29uc3QgdXNlck1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgIGNvbnRlbnQ6IGlucHV0LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgIH07XG5cbiAgICBzZXRNZXNzYWdlcygocHJldikgPT4gWy4uLnByZXYsIHVzZXJNZXNzYWdlXSk7XG4gICAgc2V0SW5wdXQoXCJcIik7XG4gICAgcXVlcnlNdXRhdGlvbi5tdXRhdGUoaW5wdXQpO1xuICB9O1xuXG4gIGNvbnN0IGZvcm1hdERhdGEgPSAoZGF0YTogYW55W10pID0+IHtcbiAgICBpZiAoIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgaGVhZGVycyA9IE9iamVjdC5rZXlzKGRhdGFbMF0pO1xuICAgIFxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgb3ZlcmZsb3cteC1hdXRvXCI+XG4gICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJtaW4tdy1mdWxsIHRleHQtc20gYm9yZGVyLWNvbGxhcHNlXCI+XG4gICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT1cImJvcmRlci1iXCI+XG4gICAgICAgICAgICAgIHtoZWFkZXJzLm1hcCgoaGVhZGVyKSA9PiAoXG4gICAgICAgICAgICAgICAgPHRoIGtleT17aGVhZGVyfSBjbGFzc05hbWU9XCJ0ZXh0LWxlZnQgcC0yIGZvbnQtbWVkaXVtXCI+XG4gICAgICAgICAgICAgICAgICB7aGVhZGVyfVxuICAgICAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgIHtkYXRhLnNsaWNlKDAsIDEwKS5tYXAoKHJvdywgaWR4KSA9PiAoXG4gICAgICAgICAgICAgIDx0ciBrZXk9e2lkeH0gY2xhc3NOYW1lPVwiYm9yZGVyLWJcIj5cbiAgICAgICAgICAgICAgICB7aGVhZGVycy5tYXAoKGhlYWRlcikgPT4gKFxuICAgICAgICAgICAgICAgICAgPHRkIGtleT17aGVhZGVyfSBjbGFzc05hbWU9XCJwLTJcIj5cbiAgICAgICAgICAgICAgICAgICAge3R5cGVvZiByb3dbaGVhZGVyXSA9PT0gJ29iamVjdCcgXG4gICAgICAgICAgICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShyb3dbaGVhZGVyXSlcbiAgICAgICAgICAgICAgICAgICAgICA6IFN0cmluZyhyb3dbaGVhZGVyXSA/PyAnJyl9XG4gICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgPC90YWJsZT5cbiAgICAgICAge2RhdGEubGVuZ3RoID4gMTAgJiYgKFxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIG10LTJcIj5cbiAgICAgICAgICAgIEFmZmljaGFnZSBkZSAxMCByw6lzdWx0YXRzIHN1ciB7ZGF0YS5sZW5ndGh9XG4gICAgICAgICAgPC9wPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICA8ZGl2PlxuICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkXCI+Q2hhdGJvdCBCYXNlIGRlIERvbm7DqWVzPC9oMz5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmRcIj5cbiAgICAgICAgICBQb3NleiBkZXMgcXVlc3Rpb25zIGVuIGxhbmdhZ2UgbmF0dXJlbCBwb3VyIGludGVycm9nZXIgbGEgYmFzZSBkZSBkb25uw6llc1xuICAgICAgICA8L3A+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPENhcmQgY2xhc3NOYW1lPVwiaC1bNjAwcHhdIGZsZXggZmxleC1jb2xcIj5cbiAgICAgICAgPENhcmRIZWFkZXIgY2xhc3NOYW1lPVwicGItM1wiPlxuICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPVwidGV4dC1iYXNlXCI+QXNzaXN0YW50IFNRTDwvQ2FyZFRpdGxlPlxuICAgICAgICAgIDxDYXJkRGVzY3JpcHRpb24+XG4gICAgICAgICAgICBFeGVtcGxlczogXCJDb21iaWVuIGRlIG1lbWJyZXMgYWN0aWZzIGF2b25zLW5vdXM/XCIsIFwiUXVlbHMgc29udCBsZXMgbWVtYnJlcyBhdmVjIGxlIHNjb3JlIGxlIHBsdXMgw6lsZXbDqT9cIlxuICAgICAgICAgIDwvQ2FyZERlc2NyaXB0aW9uPlxuICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9XCJmbGV4LTEgZmxleCBmbGV4LWNvbCBwLTBcIj5cbiAgICAgICAgICA8U2Nyb2xsQXJlYSBjbGFzc05hbWU9XCJmbGV4LTEgcHgtNFwiIHJlZj17c2Nyb2xsQXJlYVJlZn0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNCBweS00XCI+XG4gICAgICAgICAgICAgIHttZXNzYWdlcy5sZW5ndGggPT09IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIHB5LThcIj5cbiAgICAgICAgICAgICAgICAgIDxCb3QgY2xhc3NOYW1lPVwiaC0xMiB3LTEyIG14LWF1dG8gbWItNCBvcGFjaXR5LTUwXCIgLz5cbiAgICAgICAgICAgICAgICAgIDxwPkNvbW1lbmNleiDDoCBwb3NlciB1bmUgcXVlc3Rpb24gc3VyIGxhIGJhc2UgZGUgZG9ubsOpZXM8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIHttZXNzYWdlcy5tYXAoKG1lc3NhZ2UsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBnYXAtMyAke1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJvbGUgPT09IFwidXNlclwiID8gXCJqdXN0aWZ5LWVuZFwiIDogXCJqdXN0aWZ5LXN0YXJ0XCJcbiAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnJvbGUgPT09IFwiYXNzaXN0YW50XCIgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtc2hyaW5rLTAgdy04IGgtOCByb3VuZGVkLWZ1bGwgYmctcHJpbWFyeS8xMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxCb3QgY2xhc3NOYW1lPVwiaC00IHctNCB0ZXh0LXByaW1hcnlcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YG1heC13LVs4MCVdIHJvdW5kZWQtbGcgcC0zICR7XG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yb2xlID09PSBcInVzZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcImJnLXByaW1hcnkgdGV4dC1wcmltYXJ5LWZvcmVncm91bmRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcImJnLW11dGVkXCJcbiAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1zdGFydCBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnJvbGUgPT09IFwidXNlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxVc2VyIGNsYXNzTmFtZT1cImgtNCB3LTQgbXQtMC41IGZsZXgtc2hyaW5rLTBcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gd2hpdGVzcGFjZS1wcmUtd3JhcFwiPnttZXNzYWdlLmNvbnRlbnR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAge21lc3NhZ2Uuc3FsICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRldGFpbHMgY2xhc3NOYW1lPVwibXQtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdW1tYXJ5IGNsYXNzTmFtZT1cInRleHQteHMgY3Vyc29yLXBvaW50ZXIgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDb2RlIGNsYXNzTmFtZT1cImgtMyB3LTNcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVm9pciBsYSByZXF1w6p0ZSBTUUxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N1bW1hcnk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHByZSBjbGFzc05hbWU9XCJtdC0yIHRleHQteHMgYmctYmFja2dyb3VuZCBwLTIgcm91bmRlZCBvdmVyZmxvdy14LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjb2RlPnttZXNzYWdlLnNxbH08L2NvZGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGV0YWlscz5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5kYXRhICYmIGZvcm1hdERhdGEobWVzc2FnZS5kYXRhKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnJvbGUgPT09IFwidXNlclwiICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LXNocmluay0wIHctOCBoLTggcm91bmRlZC1mdWxsIGJnLXByaW1hcnkgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8VXNlciBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQtcHJpbWFyeS1mb3JlZ3JvdW5kXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAge3F1ZXJ5TXV0YXRpb24uaXNQZW5kaW5nICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTMganVzdGlmeS1zdGFydFwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LXNocmluay0wIHctOCBoLTggcm91bmRlZC1mdWxsIGJnLXByaW1hcnkvMTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPEJvdCBjbGFzc05hbWU9XCJoLTQgdy00IHRleHQtcHJpbWFyeVwiIC8+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctbXV0ZWQgcm91bmRlZC1sZyBwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPFNrZWxldG9uIGNsYXNzTmFtZT1cImgtNCB3LTMyXCIgLz5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9TY3JvbGxBcmVhPlxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGNsYXNzTmFtZT1cInAtNCBib3JkZXItdFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0yXCI+XG4gICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgIHZhbHVlPXtpbnB1dH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldElucHV0KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlBvc2V6IHZvdHJlIHF1ZXN0aW9uLi4uXCJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17cXVlcnlNdXRhdGlvbi5pc1BlbmRpbmd9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXshaW5wdXQudHJpbSgpIHx8IHF1ZXJ5TXV0YXRpb24uaXNQZW5kaW5nfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3F1ZXJ5TXV0YXRpb24uaXNQZW5kaW5nID8gKFxuICAgICAgICAgICAgICAgICAgPExvYWRlcjIgY2xhc3NOYW1lPVwiaC00IHctNCBhbmltYXRlLXNwaW5cIiAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICA8U2VuZCBjbGFzc05hbWU9XCJoLTQgdy00XCIgLz5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgIDwvQ2FyZD5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuIl0sImZpbGUiOiIvVXNlcnMvdGhpYmF1bHQvRGXMgXZlbG9wcGVtZW50cyAvQ0pEODAvY2pkODAvY2xpZW50L3NyYy9jb21wb25lbnRzL21lbWJlci1jaGF0Ym90LnRzeCJ9