.cockpit-fab{position:fixed;bottom:30px;right:30px;width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);border:none;font-size:28px;cursor:pointer;box-shadow:0 8px 32px #667eea66;transition:all .3s ease;z-index:var(--z-cockpit-fab, 999995);pointer-events:auto;isolation:isolate;transform:translateZ(0);backface-visibility:hidden}.cockpit-fab:hover{transform:scale(1.1) rotate(10deg);box-shadow:0 12px 40px #667eea99}.cockpit-overlay{position:fixed;inset:0;background:#fffffffa;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);display:flex;flex-direction:column;overflow:hidden;z-index:var(--z-cockpit-overlay, 999999);pointer-events:auto;isolation:isolate;transform:translateZ(0);backface-visibility:hidden}@media(max-width:768px){.cockpit-overlay{background:#fff}}.overlay-header{display:flex;justify-content:space-between;align-items:center;padding:20px 30px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;-webkit-user-select:none;user-select:none;box-shadow:0 2px 8px #0000001a}@media(max-width:768px){.overlay-header{padding:15px 20px}}.header-title{display:flex;align-items:center;gap:10px;font-weight:600;font-size:15px}.header-icon{font-size:20px}.header-actions{display:flex;gap:8px}.header-btn{width:28px;height:28px;border-radius:6px;border:none;background:#fff3;color:#fff;cursor:pointer;font-size:18px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.header-btn:hover{background:#ffffff4d}.overlay-content{flex:1;overflow:hidden;display:flex;flex-direction:column}.modern-chat{position:fixed;z-index:var(--z-cockpit-window, 999998);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,sans-serif;isolation:isolate;pointer-events:none}.modern-chat *{pointer-events:auto}.modern-chat.collapsed{bottom:24px;right:24px;width:44px;height:44px}.modern-chat-fab{width:44px;height:44px;border-radius:50%;border:1px solid var(--border-primary);background:var(--bg-primary);cursor:pointer;transition:all .15s ease;z-index:var(--z-cockpit-fab, 999995);pointer-events:auto;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 3px #00000014}.modern-chat-fab:hover{box-shadow:0 2px 6px #0000001f}.fab-content{display:flex;align-items:center;justify-content:center}.fab-icon{font-size:16px}.fab-badge{position:absolute;top:6px;right:6px;width:8px;height:8px;border-radius:50%;background:var(--success)}.modern-chat.expanded{width:100vw;height:100vh;bottom:0;right:0}@media(min-width:640px){.modern-chat.expanded{width:440px;height:680px;bottom:24px;right:24px;border-radius:12px;box-shadow:0 2px 8px #0000000a,0 8px 24px #00000014}}.modern-chat-window{width:100%;height:100%;background:var(--bg-primary);display:flex;flex-direction:column;border:1px solid var(--border-primary);border-radius:inherit;overflow:hidden}.modern-chat-window[data-mode=agent]:before,.modern-chat-window[data-mode=ask]:before,.modern-chat-window[data-mode=plan]:before,.modern-chat-window[data-mode=comment]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:2px;background:var(--accent-primary);opacity:.6}.modern-chat-window[data-mode=agent]:before{background:#667eea}.modern-chat-window[data-mode=ask]:before{background:#48bb78}.modern-chat-window[data-mode=plan]:before{background:#ed8936}.modern-chat-window[data-mode=comment]:before{background:#9f7aea}.modern-chat-window.selecting{pointer-events:none!important;opacity:.4;transition:opacity .15s ease}.modern-chat-window.selecting *{pointer-events:none!important}.chat-header{display:flex;justify-content:space-between;align-items:center;padding:16px;background:var(--bg-primary);border-bottom:1px solid var(--border-primary);flex-shrink:0}.header-left{display:flex;gap:12px;align-items:center}.header-icon{font-size:16px;opacity:.9}.header-info{display:flex;flex-direction:column;gap:4px}.header-title{font-size:14px;font-weight:500;color:var(--text-primary);letter-spacing:-.2px}.header-status{display:flex;align-items:center;gap:4px;font-size:11px;color:var(--text-tertiary)}.status-dot{width:4px;height:4px;border-radius:50%;background:currentColor}.header-status.online{color:var(--success)}.header-status.offline{color:var(--error)}.header-right{display:flex;align-items:center;gap:8px}.header-project{font-size:11px;padding:4px 8px;background:var(--bg-secondary);border-radius:4px;color:var(--text-secondary);font-weight:500}@media(max-width:639px){.header-project{display:none}}.header-action-btn,.header-close{width:28px;height:28px;border:none;background:transparent;color:var(--text-tertiary);border-radius:5px;cursor:pointer;font-size:14px;display:flex;align-items:center;justify-content:center;transition:all .15s ease}.header-action-btn:hover,.header-close:hover{background:var(--bg-secondary);color:var(--text-primary)}.chat-messages-area{flex:1;overflow-y:auto;padding:16px;background:var(--bg-primary)}.chat-messages-area::-webkit-scrollbar{width:3px}.chat-messages-area::-webkit-scrollbar-track{background:transparent}.chat-messages-area::-webkit-scrollbar-thumb{background:var(--border-secondary);border-radius:2px}.chat-message{display:flex;gap:12px;margin-bottom:16px}.message-avatar{width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;flex-shrink:0;background:var(--bg-secondary);opacity:.8}.chat-message.user{flex-direction:row-reverse}.message-bubble{max-width:80%;font-size:11px;line-height:1.5;color:var(--text-primary)}.chat-message.user .message-bubble{background:transparent;padding:0;text-align:right}.chat-message.agent .message-bubble{background:transparent;padding:0}.chat-message.system .message-bubble{background:var(--bg-secondary);padding:12px;border-radius:8px;font-size:11px;color:var(--text-secondary);max-width:100%}.chat-message.error .message-bubble{background:var(--error-bg);padding:12px;border-radius:8px;color:var(--error-text);border-left:2px solid var(--error)}.message-text{word-break:break-word;white-space:pre-wrap}.message-time{font-size:11px;color:var(--text-tertiary);margin-top:4px;opacity:.6}.message-meta{font-size:11px;color:var(--text-tertiary);margin-bottom:4px;opacity:.7}.chat-welcome{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;padding:24px 16px;height:100%}.welcome-icon{font-size:32px;margin-bottom:16px;opacity:.9}.chat-welcome h2{font-size:16px;font-weight:600;color:var(--text-primary);margin:0 0 8px;letter-spacing:-.3px}.welcome-subtitle{font-size:11px;color:var(--text-tertiary);margin-bottom:24px;font-weight:400}.welcome-features{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:24px;width:100%}.feature-item{display:flex;align-items:center;gap:8px;font-size:11px;color:var(--text-secondary);padding:8px;background:var(--bg-secondary);border-radius:6px;border:1px solid transparent;transition:all .15s ease}.feature-item:hover{border-color:var(--border-primary)}.feature-icon{font-size:11px;opacity:.9}.welcome-examples{display:flex;flex-direction:column;gap:8px;width:100%}.examples-title{font-size:11px;color:var(--text-tertiary);margin:0 0 8px;font-weight:500}.example-btn{background:var(--bg-secondary);border:1px solid var(--border-primary);color:var(--text-primary);padding:8px 10px;border-radius:6px;cursor:pointer;font-size:11px;text-align:left;transition:all .15s ease;font-weight:400}.example-btn:hover{background:var(--bg-tertiary);border-color:var(--border-secondary)}.chat-input-area{border-top:1px solid var(--border-primary);background:var(--bg-primary);padding:16px;flex-shrink:0}.input-container{display:flex;gap:8px;align-items:flex-end}.input-container textarea{flex:1;padding:10px 12px;border:1px solid var(--border-primary);border-radius:8px;font-size:11px;font-family:inherit;resize:none;outline:none;max-height:120px;line-height:1.5;background:var(--bg-primary);color:var(--text-primary);transition:border-color .15s ease}.input-container textarea:focus{border-color:var(--border-secondary)}.input-container textarea::placeholder{color:var(--text-tertiary);opacity:.6}.send-button{width:36px;height:36px;border:none;border-radius:6px;background:var(--accent-primary);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .15s ease}.send-button:hover:not(:disabled){opacity:.85}.send-button:disabled{opacity:.4;cursor:not-allowed}.input-footer{margin-top:8px;display:flex;justify-content:center}.footer-hint{font-size:11px;color:var(--text-tertiary);opacity:.7}.footer-hint kbd{background:var(--bg-tertiary);padding:2px 6px;border-radius:3px;font-size:11px;margin:0 2px;border:1px solid var(--border-primary)}.input-progress{display:flex;align-items:center;gap:8px;font-size:11px;color:var(--text-tertiary);margin-bottom:8px;padding:10px 12px;background:var(--bg-secondary);border-radius:6px;border:1px solid var(--border-primary)}.progress-spinner{width:12px;height:12px;border:2px solid var(--border-secondary);border-top-color:var(--accent-primary);border-radius:50%;animation:spin .8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.mode-indicator-footer{background:var(--bg-primary);border-top:1px solid var(--border-primary);padding:12px 16px;display:flex;align-items:center;justify-content:space-between;font-size:11px;color:var(--text-tertiary)}.mode-indicator{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:5px;font-weight:500;font-size:11px;border:1px solid transparent}.mode-indicator[data-mode=agent]{background:#667eea14;color:#667eea;border-color:#667eea26}.mode-indicator[data-mode=ask]{background:#48bb7814;color:#48bb78;border-color:#48bb7826}.mode-indicator[data-mode=plan]{background:#ed893614;color:#ed8936;border-color:#ed893626}.mode-indicator[data-mode=comment]{background:#9f7aea14;color:#9f7aea;border-color:#9f7aea26}.mode-indicator-footer kbd{background:var(--bg-secondary);padding:2px 6px;border-radius:3px;font-size:11px;border:1px solid var(--border-primary)}.selected-element-badge{display:flex;align-items:center;gap:8px;padding:12px 16px;background:var(--bg-secondary);border-bottom:1px solid var(--border-primary);font-size:11px;color:var(--text-secondary)}.badge-icon{font-size:14px}.badge-text{flex:1;font-family:SF Mono,Monaco,Consolas,monospace;font-size:11px}.badge-clear{width:24px;height:24px;border:none;background:transparent;color:var(--text-tertiary);border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;transition:all .15s ease}.badge-clear:hover{background:var(--bg-tertiary);color:var(--text-primary)}.mode-switcher{display:none!important}.modern-chat *:focus-visible{outline:2px solid var(--accent-primary);outline-offset:2px;border-radius:4px}@media(prefers-reduced-motion:reduce){*,*:before,*:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}.cockpit-headup[data-theme=dark] .modern-chat-fab{box-shadow:0 2px 8px #0000004d}.cockpit-headup[data-theme=dark] .modern-chat-fab:hover{box-shadow:0 4px 12px #0006}.cockpit-headup[data-theme=dark] .modern-chat.expanded{box-shadow:0 4px 16px #0000004d,0 12px 36px #00000080}:root{--z-base: 0;--z-content: 1;--z-navigation: 100;--z-dropdown: 200;--z-popover: 250;--z-modal: 300;--z-toast: 400;--z-tooltip: 450;--z-cockpit-base: 999990;--z-cockpit-fab: 999995;--z-cockpit-window: 999998;--z-cockpit-overlay: 999999;--z-emergency: 9999999}.z-base{z-index:var(--z-base)}.z-content{z-index:var(--z-content)}.z-navigation{z-index:var(--z-navigation)}.z-dropdown{z-index:var(--z-dropdown)}.z-modal{z-index:var(--z-modal)}.z-toast{z-index:var(--z-toast)}.z-cockpit{z-index:var(--z-cockpit-window)}.z-emergency{z-index:var(--z-emergency)}.cockpit-headup{position:fixed;pointer-events:none;z-index:var(--z-cockpit-overlay, 999999)}.cockpit-headup *{pointer-events:auto}.cockpit-no-project{position:fixed;top:20px;left:50%;transform:translate(-50%);background:#000c;color:#fff;padding:15px 25px;border-radius:12px;font-size:14px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 4px 20px #0000004d}.cockpit-no-project p{margin:0}
